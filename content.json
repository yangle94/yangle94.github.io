[{"title":"String","date":"2018-02-28T05:48:26.000Z","path":"2018/02/28/String/","text":"ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å…³äºStringçš„é—®é¢˜ï¼Œ 1234567891011String a = \"hello2\";final String b = \"hello\";String d = \"hello\";String c = b + 2;String e = d + 2;System.out.println(\"c:\": c);System.out.println(\"e:\": e);System.out.println(a == c);System.out.println(a == e); é¦–å…ˆï¼Œå› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å‘ç°ï¼ŒString bæ˜¯ä¸€ä¸ªå¸¸é‡ï¼ˆfinalä¿®é¥°ï¼Œå½“ç„¶ï¼Œè™šæ‹Ÿæœºå†…éƒ¨æ˜¯æ²¡æœ‰finalè¿™ä¸ªä¿®é¥°ç¬¦çš„ï¼Œä¼šåœ¨ç¼–è¯‘æœŸå°†ä»£ç ä¸­çš„finalæ“¦é™¤ï¼‰ï¼Œç›¸å¯¹åº”çš„å†ç”Ÿæˆcçš„æ—¶å€™ä¼šç›´æ¥è®¡ç®—ç»“æœï¼Œç„¶åå°†ç»“æœï¼ˆâ€œhello2â€ï¼‰èµ‹å€¼ç»™cï¼Œæ‰€ä»¥ï¼Œå¦‚æœåç¼–è¯‘ï¼ˆæˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨ideaæ‰“å¼€ç”Ÿæˆçš„classæ–‡ä»¶ï¼‰ä¼šå‘ç°ï¼Œç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š 123456String a = \"hello2\";String b = \"hello\";String d = \"hello\";String c = \"hello2\";String e = d + 2; 12345678StringBuilder @Override public String toString() &#123; // Create a copy, don't share the array return new String(value, 0, count); &#125; å½“ç„¶ï¼Œä½¿ç”¨javapåç¼–è¯‘åèƒ½å¤Ÿçœ‹åˆ°ï¼ŒString e = d + 2;è¿™é‡Œåœ¨classæ–‡ä»¶ä¸­ï¼Œä¼šä½¿ç”¨StringBuilderæ¥è´Ÿè´£å°†dä¸2è¿›è¡Œç›¸åŠ ï¼ˆappend()ï¼‰ï¼Œæœ€åï¼Œä¼šè°ƒç”¨toStringæ–¹æ³•ï¼Œç„¶åå°†ç»“æœèµ‹ç»™eã€‚æ‰€ä»¥ï¼Œaä¸cå…¨éƒ¨æŒ‡å‘å¸¸é‡æ± çš„â€œhello2â€ï¼Œè€Œç”±äºStringBuilderçš„toStringæ–¹æ³•ä¼šåœ¨å †ä¸­newä¸€ä¸ªæ–°çš„Stringå¯¹è±¡ï¼Œæ‰€ä»¥a ä¸ eæ˜¯ä¸ç›¸ç­‰çš„ï¼ˆå†…å­˜åœ°å€ä¸åŒï¼‰ã€‚","tags":[{"name":"String","slug":"String","permalink":"https://yangle94.github.io/tags/String/"}]},{"title":"randomã€ThreadLocalRandomã€SecureRandom","date":"2018-02-27T08:06:38.000Z","path":"2018/02/27/random/","text":"RandomRandomå¯ä»¥ç®—æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ç”Ÿæˆéšæœºæ•°çš„ç±»ï¼Œæ¯”å¦‚ 123Random random = new Random();int a = random.nextInt(5); è¿™æ ·ä¼šç”Ÿæˆä¸€ä¸ª0~4ä¹‹é—´çš„æ•°å­—ã€‚ Randomæ„é€ å‡½æ•°ï¼š12345678910111213141516171819202122232425262728293031323334//æ— å‚public Random() &#123; this(seedUniquifier() ^ System.nanoTime());&#125;private static long seedUniquifier() &#123; // L'Ecuyer, \"Tables of Linear Congruential Generators of // Different Sizes and Good Lattice Structure\", 1999 for (;;) &#123; long current = seedUniquifier.get(); long next = current * 181783497276652981L; if (seedUniquifier.compareAndSet(current, next)) return next; &#125;&#125;private static final AtomicLong seedUniquifier = new AtomicLong(8682522807148012L);//æœ‰å‚public Random(long seed) &#123; if (getClass() == Random.class) this.seed = new AtomicLong(initialScramble(seed)); else &#123; // subclass might have overriden setSeed this.seed = new AtomicLong(); setSeed(seed); &#125;&#125;private static long initialScramble(long seed) &#123; return (seed ^ multiplier) &amp; mask;&#125; æ„é€ æ–¹æ³•ä¸»è¦çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªAtomicLongç±»å‹çš„seedï¼Œä½œä¸ºå®ä¾‹å±æ€§ã€‚ nextInt()12345678910111213141516171819202122232425262728293031public int nextInt() &#123; return next(32);&#125;public int nextInt(int bound) &#123; if (bound &lt;= 0) throw new IllegalArgumentException(BadBound); int r = next(31); int m = bound - 1; if ((bound &amp; m) == 0) // i.e., bound is a power of 2 r = (int)((bound * (long)r) &gt;&gt; 31); else &#123; for (int u = r; u - (r = u % bound) + m &lt; 0; u = next(31)) ; &#125; return r;&#125;protected int next(int bits) &#123; long oldseed, nextseed; AtomicLong seed = this.seed; do &#123; oldseed = seed.get(); nextseed = (oldseed * multiplier + addend) &amp; mask; &#125; while (!seed.compareAndSet(oldseed, nextseed)); return (int)(nextseed &gt;&gt;&gt; (48 - bits));&#125; æˆ‘ä»¬ä¸»è¦çœ‹next()æ–¹æ³•ï¼Œnextseedçš„è®¡ç®—æ–¹å¼æ˜¯å›ºå®šçš„ï¼ˆ(oldseed * multiplier + addend) &amp; maskï¼‰ï¼Œæ‰€ä»¥nextçš„è¿”å›ç»“æœæ˜¯å¯è®¡ç®—çš„ï¼Œè®¡ç®—å¾—åˆ°nextseedåï¼Œä½¿ç”¨compareAndSetæ–¹æ³•å°†nextseedèµ‹å€¼åˆ°seedå±æ€§ä¸­ï¼ˆcasæ“ä½œï¼‰ï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™è¿”å›(int)(nextseed &gt;&gt;&gt; (48 - bits))ï¼Œå¦åˆ™ï¼Œé‡æ–°è·å¾—oldseedå¹¶è¿›è¡Œè®¡ç®—ã€‚æ‰€ä»¥ï¼Œnextæ–¹æ³•è¿”å›å€¼æ˜¯å¯é¢„æµ‹ã€æœ‰è¿¹å¯å¾ªçš„ï¼Œç”Ÿæˆçš„ç»“æœæ˜¯ä¼ªéšæœºæ•°ã€‚ 1234567Random random = new Random(1);int a = random.nextInt(5);random = new Random(1);int b = random.nextInt(5);random = new Random(1);int c = random.nextInt(5); å¯ä»¥åˆ¤æ–­ï¼Œä»¥ä¸Šä»£ç ä¸­ a = b = cã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸€å®šä¸èƒ½æŠŠè¿™ä¸ªç§å­å†™æ­»ï¼Œç”¨å½“å‰æ—¶é—´æ¯«ç§’æ•°ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½äº›ã€‚å¦å¤–ï¼Œé‡å¤new Randomå¯¹è±¡çš„æ„ä¹‰ä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆå¤§ã€‚ æœ€åè¯´ä¸€ç‚¹ï¼ŒRandomæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå»è¿™é‡Œçš„å®˜æ–¹æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œâ€œInstances of java.util.Random are threadsafe.â€ã€‚ä½†æ˜¯åœ¨å¤šçº¿ç¨‹çš„è¡¨ç°ä¸­ï¼Œä»–çš„æ€§èƒ½å¾ˆå·®ã€‚ ThreadLocalRandom123456789101112131415161718public int nextInt() &#123; return mix32(nextSeed());&#125;final long nextSeed() &#123; Thread t; long r; // read and update per-thread seed UNSAFE.putLong(t = Thread.currentThread(), SEED, r = UNSAFE.getLong(t, SEED) + GAMMA); return r;&#125;private static int mix32(long z) &#123; z = (z ^ (z &gt;&gt;&gt; 33)) * 0xff51afd7ed558ccdL; return (int)(((z ^ (z &gt;&gt;&gt; 33)) * 0xc4ceb9fe1a85ec53L) &gt;&gt;&gt; 32);&#125;private static final long GAMMA = 0x9e3779b97f4a7c15L; åœ¨æŸ¥çœ‹ThreadLocalRandomç±»ï¼ŒnextIntæ–¹æ³•ä¸»è¦æ˜¯æŸ¥æ‰¾äº†å½“å‰çº¿ç¨‹ä¸­threadLocalRandomSeedå±æ€§çš„å€¼ï¼Œæ¯æ¬¡å¢åŠ ä¸€ä¸ªGAMMAï¼Œå†å°†å€¼é‡æ–°æ”¾å…¥çº¿ç¨‹ä¸­ï¼Œç„¶åè°ƒç”¨mix32è¿›è¡Œå¤„ç†ã€‚ç”±äºThreadLocalRandomå¹¶æœªå¤§é‡ä½¿ç”¨casï¼Œæ‰€ä»¥ThreadLocalRandomæ¯”Randomæ›´å¿«ã€‚ SecureRandomåœ¨éœ€è¦é¢‘ç¹ç”Ÿæˆéšæœºæ•°ï¼Œæˆ–è€…å®‰å…¨è¦æ±‚è¾ƒé«˜çš„æ—¶å€™ï¼Œä¸è¦ä½¿ç”¨Randomï¼Œå› ä¸ºRandomæ˜¯å¯é¢„æµ‹çš„ã€‚ This class provides a cryptographically strong random number generator (RNG).SecureRandom æä¾›åŠ å¯†çš„å¼ºéšæœºæ•°ç”Ÿæˆå™¨ (RNG)ï¼Œè¦æ±‚ç§å­å¿…é¡»æ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œäº§ç”Ÿéç¡®å®šæ€§è¾“å‡ºã€‚SecureRandom ä¹Ÿæä¾›äº†ä¸å®ç°æ— å…³çš„ç®—æ³•ï¼Œå› æ­¤ï¼Œè°ƒç”¨æ–¹ï¼ˆåº”ç”¨ç¨‹åºä»£ç ï¼‰ä¼šè¯·æ±‚ç‰¹å®šçš„ RNG ç®—æ³•å¹¶å°†å®ƒä¼ å›åˆ°è¯¥ç®—æ³•çš„ SecureRandom å¯¹è±¡ä¸­ã€‚ å¦‚æœä»…æŒ‡å®šç®—æ³•åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12SecureRandom random = SecureRandom.getInstance(\"SHA1PRNG\"); å¦‚æœæ—¢æŒ‡å®šäº†ç®—æ³•åç§°åˆæŒ‡å®šäº†åŒ…æä¾›ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12SecureRandom random = SecureRandom.getInstance(\"SHA1PRNG\", \"SUN\"); ä½¿ç”¨ï¼š 1234567SecureRandom random1 = SecureRandom.getInstance(\"SHA1PRNG\");SecureRandom random2 = SecureRandom.getInstance(\"SHA1PRNG\");for (int i = 0; i &lt; 5; i++) &#123; System.out.println(random1.nextInt() + \" != \" + random2.nextInt());&#125;","tags":[{"name":"JDK8","slug":"JDK8","permalink":"https://yangle94.github.io/tags/JDK8/"}]},{"title":"ConcurrentHashMap(JDK8)","date":"2018-02-26T08:28:54.000Z","path":"2018/02/26/jdk8-ConcurrentHashMap/","text":"é™æ€å¸¸é‡1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * tableæ•°ç»„çš„æœ€å¤§é•¿åº¦ */private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;/** * é»˜è®¤tableæ•°ç»„é•¿åº¦ */private static final int DEFAULT_CAPACITY = 16;/** * æœ€å¤§æ•°ç»„é•¿åº¦ï¼ŒtoArrayä»¥åŠç›¸å…³çš„æ–¹æ³•ä¼šç”¨åˆ° */static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;/** * æ­¤è¡¨çš„é»˜è®¤å¹¶å‘çº§åˆ«ã€‚JDK8ä¸­æœªä½¿ç”¨ï¼Œä½†æ˜¯ä¸ºäº†å…¼å®¹åŸæ¥çš„ç‰ˆæœ¬ï¼ŒåŠ å…¥äº†è¯¥å±æ€§ */private static final int DEFAULT_CONCURRENCY_LEVEL = 16;/** * è´Ÿè½½å› å­ã€‚ä¿®æ”¹è¿™ä¸ªå€¼ä»…ä»…ä¼šå½±å“åˆå§‹å®¹é‡ï¼Œå®é™…ä¸Šä¸è¢«ä½¿ç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨äº†n-n&gt;&gt;2è¿™æ ·çš„è¡¨è¾¾å¼ */private static final float LOAD_FACTOR = 0.75f;/** * é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„é˜ˆå€¼ï¼Œå½“é“¾è¡¨å¤§äºç­‰äºè¯¥å€¼æ—¶ï¼Œä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚è¯¥å€¼å¿…é¡»å¤§äº2ï¼Œ * å¹¶ä¸”åº”è¯¥è‡³å°‘æœ‰8ä¸ª */static final int TREEIFY_THRESHOLD = 8;/** * å½“å°äºè¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œä¼šå°†çº¢é»‘æ ‘è½¬æ¢ä¸ºé“¾è¡¨ */static final int UNTREEIFY_THRESHOLD = 6;/** * è¿™ä¸ªå€¼ä»£è¡¨äº†å½“è¿›è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘çš„æ—¶å€™ï¼Œå¦‚æœtableæ•°ç»„çš„é•¿åº¦å°äºæ­¤å€¼ï¼Œä¼šè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œ * è€Œä¸æ˜¯è¿›è¡Œçº¢é»‘æ ‘è½¬æ¢å·¥ä½œã€‚é€šè¿‡æ‰©å®¹tableæ•°ç»„ï¼Œå‡å°‘æŸä¸ªæ¡¶å†…çš„é“¾è¡¨é•¿åº¦ï¼Œæ¥å‡å°‘æ—¶é—´ã€‚ * å€¼åº”è¯¥è‡³å°‘ä¸º4 * TREEIFY_THRESHOLDï¼Œ * ä»¥é¿å…åœ¨è°ƒæ•´å¤§å°å’Œè®¾ç½®treeificationé˜ˆå€¼ä¹‹é—´å‘ç”Ÿå†²çªã€‚ */static final int MIN_TREEIFY_CAPACITY = 64;/** * æ‰©å®¹æ—¶å•æ ¸è·å¾—çš„æœ€ä½æ¡¶æ•°å¤§å° */private static final int MIN_TRANSFER_STRIDE = 16;/** * åœ¨sizeCtlä¸­ç”¨äºç”Ÿæˆæˆ³è®°çš„æ¯”ç‰¹æ•°ã€‚32ä½æ•°ç»„å¿…é¡»è‡³å°‘æœ‰6ä¸ª */private static int RESIZE_STAMP_BITS = 16;/** */private static final int MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;/** */private static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS; Node1234567891011121314151617181920212223242526272829303132333435363738394041424344454647static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; volatile V val; volatile Node&lt;K,V&gt; next; Node(int hash, K key, V val, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.val = val; this.next = next; &#125; public final K getKey() &#123; return key; &#125; public final V getValue() &#123; return val; &#125; public final int hashCode() &#123; return key.hashCode() ^ val.hashCode(); &#125; public final String toString()&#123; return key + \"=\" + val; &#125; public final V setValue(V value) &#123; throw new UnsupportedOperationException(); &#125; public final boolean equals(Object o) &#123; Object k, v, u; Map.Entry&lt;?,?&gt; e; return ((o instanceof Map.Entry) &amp;&amp; (k = (e = (Map.Entry&lt;?,?&gt;)o).getKey()) != null &amp;&amp; (v = e.getValue()) != null &amp;&amp; (k == key || k.equals(key)) &amp;&amp; (v == (u = val) || v.equals(u))); &#125; /** * Virtualized support for map.get(); overridden in subclasses. */ Node&lt;K,V&gt; find(int h, Object k) &#123; Node&lt;K,V&gt; e = this; if (k != null) &#123; do &#123; K ek; if (e.hash == h &amp;&amp; ((ek = e.key) == k || (ek != null &amp;&amp; k.equals(ek)))) return e; &#125; while ((e = e.next) != null); &#125; return null; &#125; &#125; å¯ä»¥çœ‹åˆ°ï¼ŒNodeç±»çš„valè·Ÿnextå±æ€§å…¨éƒ¨éƒ½ç”±å…³é”®å­—volatileä¿®é¥°ï¼Œä»£è¡¨è·å¾—çš„å€¼æ€»ä¼šæ˜¯æœ€æ–°çš„å€¼ã€‚å…¶ä¸­ï¼ŒsetValue()ä¼šç›´æ¥æŠ›å‡ºUnsupportedOperationExceptionå¼‚å¸¸ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡setValue()ä¿®æ”¹valueçš„å€¼ã€‚find()ç”¨äºéå†Nodeæ•°ç»„ï¼Œæ‰¾å‡ºç¬¦åˆçš„Nodeå¯¹è±¡ã€‚ casæ“ä½œæ–¹æ³•1234567891011121314151617@SuppressWarnings(\"unchecked\")static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) &#123; //è·å–objå¯¹è±¡ä¸­offsetåç§»åœ°å€å¯¹åº”çš„objectå‹fieldçš„å€¼ return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);&#125;static final &lt;K,V&gt; boolean casTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; c, Node&lt;K,V&gt; v) &#123; //åœ¨objçš„offsetä½ç½®æ¯”è¾ƒobject fieldå’ŒæœŸæœ›çš„å€¼ï¼Œå¦‚æœç›¸åŒåˆ™æ›´æ–°ã€‚è¿™ä¸ªæ–¹æ³•çš„æ“ä½œåº”è¯¥æ˜¯åŸå­çš„ï¼Œå› æ­¤æä¾›äº†ä¸€ç§ä¸å¯ä¸­æ–­çš„æ–¹å¼æ›´æ–°object fieldã€‚ return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);&#125;static final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) &#123; //è®¾ç½®objå¯¹è±¡ä¸­offsetåç§»åœ°å€å¯¹åº”çš„objectå‹fieldçš„å€¼ä¸ºæŒ‡å®šå€¼ã€‚ U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);&#125; TreeNode12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849static final class TreeNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K,V&gt; parent; // red-black tree links TreeNode&lt;K,V&gt; left; TreeNode&lt;K,V&gt; right; TreeNode&lt;K,V&gt; prev; // needed to unlink next upon deletion boolean red; TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next, TreeNode&lt;K,V&gt; parent) &#123; super(hash, key, val, next); this.parent = parent; &#125; Node&lt;K,V&gt; find(int h, Object k) &#123; return findTreeNode(h, k, null); &#125; //æŸ¥æ‰¾hashä¸ºhï¼Œkeyä¸ºkçš„èŠ‚ç‚¹ final TreeNode&lt;K,V&gt; findTreeNode(int h, Object k, Class&lt;?&gt; kc) &#123; if (k != null) &#123; TreeNode&lt;K,V&gt; p = this; do &#123; int ph, dir; K pk; TreeNode&lt;K,V&gt; q; TreeNode&lt;K,V&gt; pl = p.left, pr = p.right; if ((ph = p.hash) &gt; h) p = pl; else if (ph &lt; h) p = pr; else if ((pk = p.key) == k || (pk != null &amp;&amp; k.equals(pk))) return p; else if (pl == null) p = pr; else if (pr == null) p = pl; else if ((kc != null || (kc = comparableClassFor(k)) != null) &amp;&amp; (dir = compareComparables(kc, k, pk)) != 0) p = (dir &lt; 0) ? pl : pr; else if ((q = pr.findTreeNode(h, k, kc)) != null) return q; else p = pl; &#125; while (p != null); &#125; return null; &#125; &#125; å½“é“¾è¡¨è¶…è¿‡æŒ‡å®šé•¿åº¦çš„æ—¶å€™ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œæ‰€ä½¿ç”¨çš„èŠ‚ç‚¹åŒ…è£…ç±»å°±æ˜¯TreeBinç±»ï¼Œä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å¹¶ä¸æ˜¯ç›´æ¥æ”¾åœ¨tableæ•°ç»„ä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨TreeBinå¯¹è±¡ä¸­ï¼Œå†å°†TreeBinå¯¹è±¡æ”¾å…¥tableæ•°ç»„ã€‚ TreeBin1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556static final class TreeBin&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; TreeNode&lt;K, V&gt; root; volatile TreeNode&lt;K, V&gt; first; volatile Thread waiter; volatile int lockState; static final int WRITER = 1; // set while holding write lock static final int WAITER = 2; // set when waiting for write lock static final int READER = 4; // increment value for setting read lock TreeBin(TreeNode&lt;K, V&gt; b) &#123; super(TREEBIN, null, null, null); this.first = b; TreeNode&lt;K, V&gt; r = null; for (TreeNode&lt;K, V&gt; x = b, next; x != null; x = next) &#123; next = (TreeNode&lt;K, V&gt;) x.next; x.left = x.right = null; if (r == null) &#123; x.parent = null; x.red = false; r = x; &#125; else &#123; K k = x.key; int h = x.hash; Class&lt;?&gt; kc = null; for (TreeNode&lt;K, V&gt; p = r; ; ) &#123; int dir, ph; K pk = p.key; if ((ph = p.hash) &gt; h) dir = -1; else if (ph &lt; h) dir = 1; else if ((kc == null &amp;&amp; (kc = comparableClassFor(k)) == null) || (dir = compareComparables(kc, k, pk)) == 0) dir = tieBreakOrder(k, pk); TreeNode&lt;K, V&gt; xp = p; if ((p = (dir &lt;= 0) ? p.left : p.right) == null) &#123; x.parent = xp; if (dir &lt;= 0) xp.left = x; else xp.right = x; r = balanceInsertion(r, x); break; &#125; &#125; &#125; &#125; this.root = r; assert checkInvariants(root); &#125; â€¦â€¦çœç•¥å…¶ä»–æ–¹æ³• &#125; å¯ä»¥çœ‹åˆ°ï¼ŒTreeBinçš„æ„é€ æ–¹æ³•å…¶å®å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªçº¢é»‘æ ‘ï¼Œå…¶ä¸­çš„èŠ‚ç‚¹ä¸ºTreeNodeã€‚ ForwardingNode12345678910111213141516171819202122232425262728293031323334static final class ForwardingNode&lt;K,V&gt; extends Node&lt;K,V&gt; &#123; final Node&lt;K,V&gt;[] nextTable; ForwardingNode(Node&lt;K,V&gt;[] tab) &#123; super(MOVED, null, null, null); this.nextTable = tab; &#125; Node&lt;K,V&gt; find(int h, Object k) &#123; // loop to avoid arbitrarily deep recursion on forwarding nodes outer: for (Node&lt;K,V&gt;[] tab = nextTable;;) &#123; Node&lt;K,V&gt; e; int n; if (k == null || tab == null || (n = tab.length) == 0 || (e = tabAt(tab, (n - 1) &amp; h)) == null) return null; for (;;) &#123; int eh; K ek; if ((eh = e.hash) == h &amp;&amp; ((ek = e.key) == k || (ek != null &amp;&amp; k.equals(ek)))) return e; if (eh &lt; 0) &#123; if (e instanceof ForwardingNode) &#123; tab = ((ForwardingNode&lt;K,V&gt;)e).nextTable; continue outer; &#125; else return e.find(h, k); &#125; if ((e = e.next) == null) return null; &#125; &#125; &#125; &#125; æ­¤ç±»ä¸ºä¸€ä¸ªè¾…åŠ©ç±»ï¼Œä»…ä»…ä½œç”¨äºConcurrentHashMapæ‰©å®¹æ“ä½œæ—¶ã€‚åªæ˜¯ä¸€ä¸ªæ ‡å¿—èŠ‚ç‚¹ï¼Œå¹¶ä¸”æŒ‡å‘nextTableï¼Œå®ƒæä¾›findæ–¹æ³•ã€‚è¯¥ç±»ä¹Ÿæ˜¯ç»§æ‰¿NodeèŠ‚ç‚¹ï¼Œå…¶hashä¸º-1ï¼Œkeyã€valueã€nextå‡ä¸ºnullã€‚ å®ä¾‹å±æ€§1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * æ¡¶æ•°ç»„ï¼Œé•¿åº¦æ€»ä¸º2çš„næ¬¡æ–¹ï¼Œè¿›è¡Œç¬¬ä¸€æ¬¡æ“ä½œæ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚ */transient volatile Node&lt;K,V&gt;[] table;/** * ä½¿ç”¨çš„ä¸‹ä¸€ä¸ªtableæ•°ç»„ï¼Œä»…ä»…åœ¨è°ƒæ•´å¤§å°çš„æ—¶å€™ä½¿ç”¨ã€‚ */private transient volatile Node&lt;K,V&gt;[] nextTable;/** * ConcurrentHashMapä¸­å…ƒç´ ä¸ªæ•°,ä½†è¿”å›çš„ä¸ä¸€å®šæ˜¯å½“å‰Mapçš„çœŸå®å…ƒç´ ä¸ªæ•°ã€‚åŸºäºCASæ— é”æ›´ * æ–° */private transient volatile long baseCount;/** * volatileä¿®é¥°çš„intç±»å‹ï¼Œæ˜¯å…¶ä»–çº¿ç¨‹å¯è§çš„ã€‚ * è¡¨åˆå§‹åŒ–å’Œè°ƒæ•´å¤§å°æ§åˆ¶ã€‚ * å½“è´Ÿå€¼æ—¶ï¼Œtableæ•°ç»„è¢«åˆå§‹åŒ–æˆ–è°ƒæ•´å¤§å°:-1ç”¨äºåˆå§‹åŒ–ï¼Œå…¶å®ƒçš„ -(1 +ä¸»åŠ¨è°ƒæ•´å¤§å°çš„çº¿ç¨‹æ•°)ã€‚ * å¦åˆ™ï¼Œå½“tableæ•°ç»„ä¸ºç©ºæ—¶ï¼Œä¿å­˜åˆå§‹è¡¨å¤§å°ä»¥åœ¨åˆ›å»ºæ—¶ä½¿ç”¨ï¼Œæˆ–é»˜è®¤ä¸º0ã€‚åˆå§‹åŒ–åï¼Œä¿å­˜ä¸‹ä¸€ä¸ªå…ƒç´ countå€¼ï¼Œä»¥è°ƒæ•´è¡¨çš„å¤§å°ã€‚ */private transient volatile int sizeCtl;/** * è®°å½•ä¸‹ä¸€ä¸ªåˆ‡åˆ†tablesæ•°ç»„çš„ç´¢å¼• */private transient volatile int transferIndex;/** * è‡ªæ—‹é”(é€šè¿‡CASé”å®š)åœ¨è°ƒæ•´å’Œ/æˆ–åˆ›å»ºåå•å…ƒæ—¶ä½¿ç”¨ */private transient volatile int cellsBusy;/** * è®¡æ•°å™¨æ•°ç»„ã€‚å½“éç©ºå€¼æ—¶ï¼Œå¤§å°æ˜¯2çš„å¹‚ */private transient volatile CounterCell[] counterCells;// æ˜¾ç¤ºç”¨private transient KeySetView&lt;K,V&gt; keySet;private transient ValuesView&lt;K,V&gt; values;private transient EntrySetView&lt;K,V&gt; entrySet; put()ã€putIfAbsent()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148public V put(K key, V value) &#123; return putVal(key, value, false); &#125; public V putIfAbsent(K key, V value) &#123; return putVal(key, value, true); &#125; final V putVal(K key, V value, boolean onlyIfAbsent) &#123; //ä¸å…è®¸keyæˆ–è€…valueä¸ºnull if (key == null || value == null) throw new NullPointerException(); int hash = spread(key.hashCode()); int binCount = 0; //å¾ªç¯è¿›è¡Œï¼Œå¦‚æœèµ‹å€¼æˆåŠŸä¼šbreaké€€å‡º for (Node&lt;K,V&gt;[] tab = table;;) &#123; Node&lt;K,V&gt; f; int n, i, fh; //å¦‚æœtabæœªè¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ– if (tab == null || (n = tab.length) == 0) tab = initTable(); //ä½¿ç”¨tabAt()ï¼ŒæŸ¥æ‰¾å‡ºæ”¹keyçš„hashåœ¨tableæ•°ç»„ else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) &#123; //ä½¿ç”¨casçš„æ–¹å¼å‘tableæ•°ç»„è¿›è¡Œèµ‹å€¼ï¼ŒæˆåŠŸåˆ™é€€å‡ºï¼Œå¤±è´¥åˆ™è¿›å…¥ä¸‹æ¬¡å¾ªç¯ if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value, null))) break; // no lock when adding to empty bin &#125; //å¦‚æœå¤´ç»“ç‚¹çš„hashä¸º-1ï¼Œè¯´æ˜æ­£åœ¨æ‰©å®¹,åˆ™è¿›å…¥å¸®åŠ©è¿›è¡Œæ‰©å®¹ else if ((fh = f.hash) == MOVED) tab = helpTransfer(tab, f); else &#123; //è¿™é‡Œä»£è¡¨å½“å‰è¦æ’å…¥çš„å€¼å‘ç”Ÿæ’åº“ï¼Œéœ€è¦å¯¹é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘è¿›è¡Œæ“ä½œ V oldVal = null; //å¯¹fåŠ é” synchronized (f) &#123; //å…ˆåˆ¤æ–­å½“å‰å¤´èŠ‚ç‚¹æ˜¯ä¸æ˜¯è¿˜æ˜¯æ­¤fèŠ‚ç‚¹ï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯´æ˜å…¶å®ƒçº¿ç¨‹å·²ç»æ›´æ”¹äº†ç»“æ„ï¼Œé‡æ–°è¿›è¡Œforå¾ªç¯å°è¯•ã€‚ if (tabAt(tab, i) == f) &#123; if (fh &gt;= 0) &#123; binCount = 1; for (Node&lt;K,V&gt; e = f;; ++binCount) &#123; //å¦‚æœkeyç›¸åŒå¹¶ä¸”å…è®¸è¦†ç›–ï¼Œåˆ™è¿›è¡Œè¦†ç›– K ek; if (e.hash == hash &amp;&amp; ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))) &#123; oldVal = e.val; if (!onlyIfAbsent) e.val = value; break; &#125; //e = e.nextï¼Œå¦‚æœæœ€åä¸€ä¸ªéƒ½ä¸æ˜¯ï¼Œåˆ™åœ¨å°¾éƒ¨å¢åŠ ä¸€ä¸ª Node&lt;K,V&gt; pred = e; if ((e = e.next) == null) &#123; pred.next = new Node&lt;K,V&gt;(hash, key, value, null); break; &#125; &#125; &#125; //å¦‚æœfæ˜¯treebinç±»å‹ else if (f instanceof TreeBin) &#123; Node&lt;K,V&gt; p; binCount = 2; if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key, value)) != null) &#123; oldVal = p.val; if (!onlyIfAbsent) p.val = value; &#125; &#125; &#125; &#125; //å¦‚æœé“¾è¡¨é•¿åº¦ä¸ä¸º0å¹¶ä¸”å¤§äºç­‰äºTREEIFY_THRESHOLDï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ if (binCount != 0) &#123; if (binCount &gt;= TREEIFY_THRESHOLD) treeifyBin(tab, i); if (oldVal != null) return oldVal; break; &#125; &#125; &#125; //sizeå¢åŠ 1 addCount(1L, binCount); return null; &#125; /** * Initializes table, using the size recorded in sizeCtl. */ private final Node&lt;K,V&gt;[] initTable() &#123; Node&lt;K,V&gt;[] tab; int sc; //å¾ªç¯åˆ¤æ–­tableæ•°ç»„æ˜¯å¦åˆå§‹åŒ– while ((tab = table) == null || tab.length == 0) &#123; //å¦‚æœsizeCtl&lt;0(ä¸Šéƒ¨åˆ†è¯´è¿‡ï¼ŒsizeCtl&lt;0ä»£è¡¨å·²ç»æœ‰çº¿ç¨‹åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ) if ((sc = sizeCtl) &lt; 0) //è®©å‡ºcpuæ—¶é—´ Thread.yield(); // lost initialization race; just spin //é€šè¿‡casæ“ä½œï¼Œä½¿ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè¿›å…¥ else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123; try &#123; //é‡æ–°åˆ¤æ–­tabæ˜¯å¦å·²ç»åˆå§‹åŒ–ï¼Œé˜²æ­¢æç«¯æƒ…å†µã€‚ if ((tab = table) == null || tab.length == 0) &#123; int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY; @SuppressWarnings(\"unchecked\") Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n]; table = tab = nt; //scä¸ºnçš„0.75 sc = n - (n &gt;&gt;&gt; 2); &#125; &#125; finally &#123; //ç»™sizeCtlè®¾ç½®ä¸‹ä¸€æ¬¡çš„é˜ˆå€¼ï¼ˆè¿™é‡Œç”¨çš„æ˜¯ç›´æ¥å¤åˆ¶ï¼Œè€Œæ²¡ç”¨casï¼‰ sizeCtl = sc; &#125; break; &#125; &#125; return tab; &#125; /** * Helps transfer if a resize is in progress. */ final Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) &#123; Node&lt;K,V&gt;[] nextTab; int sc; if (tab != null &amp;&amp; (f instanceof ForwardingNode) &amp;&amp; (nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != null) &#123; int rs = resizeStamp(tab.length); while (nextTab == nextTable &amp;&amp; table == tab &amp;&amp; (sc = sizeCtl) &lt; 0) &#123; if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 || sc == rs + MAX_RESIZERS || transferIndex &lt;= 0) break; if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) &#123; transfer(tab, nextTab); break; &#125; &#125; return nextTab; &#125; return table; &#125; æŒ‰ç…§ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šputæ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š åˆ¤ç©ºï¼›ConcurrentHashMapçš„keyã€valueéƒ½ä¸å…è®¸ä¸ºnull è®¡ç®—hashã€‚åˆ©ç”¨spread()è®¡ç®—hashå€¼ã€‚ 1234static final int spread(int h) &#123; return (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS;&#125; éå†tableï¼Œè¿›è¡ŒèŠ‚ç‚¹æ’å…¥æ“ä½œï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š å¦‚æœtableä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºConcurrentHashMapæœªåˆå§‹åŒ–ï¼Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼šinitTable() æ ¹æ®hashå€¼è·å–èŠ‚ç‚¹çš„ä½ç½®iï¼Œè‹¥è¯¥ä½ç½®ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥ï¼ˆä¸éœ€è¦åŠ é”ï¼‰ã€‚è®¡ç®—fä½ç½®ï¼ši=(n â€“ 1) &amp; hash å¦‚æœæ£€æµ‹åˆ°fh = f.hash == -1ï¼Œåˆ™fæ˜¯ForwardingNodeèŠ‚ç‚¹ï¼Œè¡¨ç¤ºæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåˆ™å¸®åŠ©çº¿ç¨‹ä¸€èµ·è¿›è¡Œæ‰©å®¹æ“ä½œ å¦‚æœf.hash &gt;= 0 è¡¨ç¤ºæ˜¯é“¾è¡¨ç»“æ„ï¼Œåˆ™éå†é“¾è¡¨ï¼Œå¦‚æœå­˜åœ¨å½“å‰keyèŠ‚ç‚¹åˆ™æ›¿æ¢valueï¼Œå¦åˆ™æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨ã€‚å¦‚æœfæ˜¯TreeBinç±»å‹èŠ‚ç‚¹ï¼Œåˆ™æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹æ³•æ›´æ–°æˆ–è€…å¢åŠ èŠ‚ç‚¹ è‹¥é“¾è¡¨é•¿åº¦ &gt; TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„ è°ƒç”¨addCountæ–¹æ³•ï¼ŒConcurrentHashMapçš„size + 1","tags":[{"name":"java8","slug":"java8","permalink":"https://yangle94.github.io/tags/java8/"},{"name":"concurrent","slug":"concurrent","permalink":"https://yangle94.github.io/tags/concurrent/"}]},{"title":"HashMap(jdk8)","date":"2018-02-01T05:19:49.000Z","path":"2018/02/01/jdk8-hashMap/","text":"HashMapé™æ€å¸¸é‡1234567891011121314151617181920212223242526272829303132333435/** * é»˜è®¤tableæ•°ç»„å¤§å°ï¼Œå¿…é¡»æ˜¯2çš„å€æ•° */ static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 /** * tableæ•°ç»„é•¿åº¦æœ€å¤§å€¼ï¼Œä¸º2^30 */ static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; /** * è´Ÿè½½å› å­ï¼ˆé»˜è®¤ï¼‰ */ static final float DEFAULT_LOAD_FACTOR = 0.75f; /** * æ ‡è¯†ç”±é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„é˜ˆå€¼ï¼Œåªæœ‰å½“æŸä¸€ä¸ªé“¾è¡¨å¤§äºç­‰äºæ­¤å€¼çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘ * æ ‘ã€‚è¿™ä¸ªæ•°å¿…é¡»è¦å¤§äº2ï¼Œé»˜è®¤å€¼æ˜¯8ï¼Œå½“ç„¶ä¹Ÿæ¨èä»8å¼€å§‹å¾€ä¸Šçš„å€¼ã€‚ï¼ˆæŸ¥çœ‹æºç åï¼Œå‘ç°å¦‚æœ * tableæ•°ç»„çš„é•¿åº¦å°äºMIN_TREEIFY_CAPACITYçš„å€¼çš„æ—¶å€™ï¼Œä»…ä»…ä¼šè¿›è¡Œæ‰©å®¹ï¼Œå¹¶ä¸ä¼šè¿›è¡Œçº¢é»‘ * æ ‘è½¬æ¢ï¼Œè§HashMap#treeifyBin()æ–¹æ³•ï¼‰ */ static final int TREEIFY_THRESHOLD = 8; /** * æ ‡è¯†æœ‰çº¢é»‘æ ‘è½¬æ¢ä¸ºé“¾è¡¨çš„é˜ˆå€¼ï¼Œåªæœ‰å½“æŸä¸ªæŸä¸ªçº¢é»‘æ ‘å°äºç­‰äºè¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œä¼šæŠŠçº¢é»‘æ ‘è½¬æ¢ * ä¸ºé“¾è¡¨ã€‚å…·ä½“æ–¹æ³•ä¸ºTreeNode#untreeify() */ static final int UNTREEIFY_THRESHOLD = 6; /** * é™å®štableé•¿åº¦çš„æœ€å°å€¼ï¼Œå½“å¤§äºç­‰äºè¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼›å¦åˆ™ï¼Œä»…ä»…è¿›è¡Œ * æ‰©å®¹ã€‚æ–¹æ³•è§HashMap#treeifyBin() */ static final int MIN_TREEIFY_CAPACITY = 64; Node(HashMapé™æ€å†…éƒ¨ç±»)12345678910111213141516171819202122232425262728293031323334353637383940static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; V value; Node&lt;K,V&gt; next; Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; public final K getKey() &#123; return key; &#125; public final V getValue() &#123; return value; &#125; public final String toString() &#123; return key + \"=\" + value; &#125; public final int hashCode() &#123; return Objects.hashCode(key) ^ Objects.hashCode(value); &#125; public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; public final boolean equals(Object o) &#123; if (o == this) return true; if (o instanceof Map.Entry) &#123; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; &#125; return false; &#125; &#125; Nodeæ³¨æ„ç‚¹ï¼š Nodeç±»æ˜¯é“¾è¡¨çŠ¶æ€ä¸‹æ¯ä¸ªèŠ‚ç‚¹çš„æ˜¯å®é™…ç±»å‹ï¼Œå®ƒå®ç°äº†Map.Entityæ¥å£ã€‚æ¯ä¸ªNodeèŠ‚ç‚¹æœ‰ä¸€ä¸ªnextæˆå‘˜å˜é‡ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªNodeèŠ‚ç‚¹çš„å¼•ç”¨ã€‚ Nodeç±»ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œä½œç”¨åŸŸä¸ºé»˜è®¤çº§åˆ«ï¼Œå³ä»…æœ‰æ­¤ç±»æœ¬èº«ä»¥åŠç›¸åŒåŒ…ä¸‹çš„ç±»èƒ½å¤Ÿè®¿é—®ã€‚ hashä¸keyä¸¤ä¸ªç±»å‹å‡ä¸ºfinalï¼Œæ„å‘³ç€ä¸èƒ½æ”¹å˜ã€‚ æ¯ä¸ªNodeèŠ‚ç‚¹çš„hashcodeæ–¹æ³•æ˜¯ç”±æ¯ä¸ªèŠ‚ç‚¹çš„keyä¸valueçš„hashcodeæ–¹æ³•çš„^ï¼ŒæŸ¥çœ‹Object.hash()æ–¹æ³•ï¼Œå‘ç°å½“keyæˆ–è€…valueç­‰äºnullçš„æ—¶å€™ï¼Œhashä¸º0ï¼›å¦åˆ™ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„hashcodeæ–¹æ³•ã€‚åŒæ—¶ï¼Œè¿™æ„å‘³ç€equalsåŒæ—¶è·Ÿkeyä¸valueæœ‰å…³ç³»ã€‚ setValueæ–¹æ³•ä¼šè¿”å›nodeä¸­çš„åŸå€¼ã€‚ equalsæ–¹æ³•ä¸­ï¼Œå¹¶ä¸æ’æ–¥mapä¸­keyæˆ–è€…valueä¸ºnullã€‚ HashMapé™æ€æ–¹æ³•12345static final int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); &#125; æ­¤æ–¹æ³•å½“keyä¸ºnullæ—¶è¿”å›0ï¼Œå¦åˆ™ï¼Œå°±ä¼šç”¨keyçš„hashä¸hashçš„å‰16ä½å¼‚æˆ–ã€‚ 12345678910111213141516171819static Class&lt;?&gt; comparableClassFor(Object x) &#123; if (x instanceof Comparable) &#123; Class&lt;?&gt; c; Type[] ts, as; Type t; ParameterizedType p; if ((c = x.getClass()) == String.class) // bypass checks return c; if ((ts = c.getGenericInterfaces()) != null) &#123; for (int i = 0; i &lt; ts.length; ++i) &#123; if (((t = ts[i]) instanceof ParameterizedType) &amp;&amp; ((p = (ParameterizedType)t).getRawType() == Comparable.class) &amp;&amp; (as = p.getActualTypeArguments()) != null &amp;&amp; as.length == 1 &amp;&amp; as[0] == c) // type arg is c return c; &#125; &#125; &#125; return null; &#125; comparableClassForæ–¹æ³•ç”¨äºåˆ¤æ–­xæ˜¯ä¸æ˜¯å¯æ¯”è¾ƒçš„ï¼ˆæ˜¯å¦å®ç°äº†Comparableæ¥å£ï¼‰ï¼Œå¦‚æœå®ç°äº†æ­¤æ¥å£åˆ™è¿”å›Comparableæ¥å£ä¸­çš„æ³›å‹ç±»å‹ï¼Œå¦åˆ™è¿”å›nullã€‚ 12345static int compareComparables(Class&lt;?&gt; kc, Object k, Object x) &#123; return (x == null || x.getClass() != kc ? 0 : ((Comparable)k).compareTo(x)); &#125; è¿”å›kä¸xçš„æ¯”è¾ƒç»“æœã€‚å¦‚æœxä¸ºnullæˆ–è€…xçš„class != kcï¼Œè¿”å›0ã€‚ 12345678910111213/** * Returns a power of two size for the given target capacity. */static final int tableSizeFor(int cap) &#123; int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;&#125; è¿™æ®µå°±å‰å®³äº†ï¼Œæ­¤æ–¹æ³•å£°æ˜äº†ä¸€ä¸ªç®—æ³•ï¼Œé€šè¿‡ä½è¿ç®—ï¼Œä½¿å¾—è·å¾—çš„æ•°å€¼æ˜¯è¾“å…¥çš„ä¸¤å€ã€‚å…ˆçœ‹nçš„ä½ç§»æ“ä½œéƒ¨åˆ†ï¼Œå¦‚æœæ˜¯0100ï¼Œç¬¬ä¸€æ¬¡ä½ç§»åå°±å˜ä¸ºäº†0110ï¼Œç¬¬äºŒæ¬¡ä¸º0111ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åçš„ç»“æœä¸º0111ï¼Œå†åŠ ä¸€æ‰€å¾—ç»“æœä¸º1000ï¼Œæ‰©å®¹ä¸ºäº†ä¸‹ä¸€ä¸ª2çš„æ¬¡æ–¹ã€‚å…¶åŸç†åœ¨äºåœ¨äºŒè¿›åˆ¶æ•°ä¸­ï¼ŒæŸä¸ªæ•°çš„æœ€é«˜ä½ä¸Šè‚¯å®šæ˜¯1ï¼Œå°†è¿™ä¸ª1é€šè¿‡ä½è¿ç®—ä»¥åŠæˆ–è¿ç®—ï¼Œä¾æ¬¡å‘åå»¶ä¼¸ï¼Œæ‰€å¾—çš„æ•°è‚¯å®šä¸º2^n-1ï¼Œæœ€å+1ï¼Œå¾—åˆ°2^næ¬¡æ–¹ã€‚ å†æ¥çœ‹ç¬¬ä¸€å¥è¯ï¼Œç¬¬ä¸€å¥è¯ä¿è¯äº†å¦‚æœè¾“å…¥çš„æœ¬æ¥å°±æ˜¯2æ¬¡æ–¹ï¼Œæ‰€å¾—ç»“æœæ˜¯å…¶æœ¬èº«ã€‚ å½“ç„¶ï¼Œè¿™ä¸ªæœ€åç»“æœæœ€å¤§å€¼ä¸º2^30ã€‚ HashMapçš„å®ä¾‹å­—æ®µ12345678910111213141516171819202122232425262728293031/** * è¯¥å­—æ®µä¸ºæ¯ä¸ªé“¾è¡¨æˆ–çº¢é»‘æ ‘çš„ç¬¬ä¸€ä¸ªNodeç»„æˆçš„æ•°ç»„ã€‚æ­¤æ•°ç»„åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œ * å½“åˆ†é…é•¿åº¦çš„æ—¶å€™ï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦æ€»æ˜¯2^nã€‚ */ transient Node&lt;K,V&gt;[] table; /** * ç¼“å­˜ç”¨äºç”ŸæˆentrySet()çš„å¯¹è±¡ï¼Œæ­¤å¯¹è±¡å°†åœ¨entrySet()æ–¹æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™è¿›è¡Œåˆ›å»ºã€‚ */ transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet; /** * HashMapçš„é”®å€¼å¯¹æ•°é‡ */ transient int size; /** * æ­¤HashMapè¢«ä¿®æ”¹è§£æ„çš„æ¬¡æ•°ã€‚ä¾‹å¦‚åˆ é™¤ã€å¢åŠ ç­‰ã€‚è¿™ä¸ªå­—æ®µç”¨äºéå†è§†å›¾çš„å¿«é€Ÿå¤±è´¥ã€‚ */ transient int modCount; /** * è¿›è¡Œresizeé˜ˆå€¼ */ int threshold; /** * è´Ÿè½½å› å­(final ä¸å¯å˜) */ final float loadFactor; HashMap#put()123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true); &#125; final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; for (int binCount = 0; ; ++binCount) &#123; if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null; &#125; HashMapæµç¨‹å›¾å¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•éœ€è¦æ³¨æ„ä¸‹ï¼š TreeNode#putTreeVal()ï¼Œæ­¤æ–¹æ³•ç”¨æ¥åœ¨çº¢é»‘æ ‘ä¸­å¢åŠ ä¸€ä¸ªå€¼ï¼Œå…·ä½“çº¢é»‘æ ‘ç®—æ³•ä¸åœ¨è¿™é‡Œèµ˜è¿°ã€‚ HashMap#treeifyBin(),å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) &#123; int n, index; Node&lt;K,V&gt; e; if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY) resize(); else if ((e = tab[index = (n - 1) &amp; hash]) != null) &#123; TreeNode&lt;K,V&gt; hd = null, tl = null; do &#123; TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null); if (tl == null) hd = p; else &#123; p.prev = tl; tl.next = p; &#125; tl = p; &#125; while ((e = e.next) != null); if ((tab[index] = hd) != null) hd.treeify(tab); &#125; &#125; ç”±æ­¤å¯è§ï¼Œå½“talbeä¸ºnullæˆ–è€…é•¿åº¦å°äºMIN_TREEIFY_CAPACITYæ—¶ï¼Œä»…ä»…ä¼šè¿›è¡Œæ‰©å®¹ï¼Œå¹¶ä¸ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚ HashMap#resize()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374final Node&lt;K,V&gt;[] resize() &#123; Node&lt;K,V&gt;[] oldTab = table; int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; if (oldCap &gt; 0) &#123; if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return oldTab; &#125; else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) newThr = oldThr &lt;&lt; 1; // double threshold &#125; else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; else &#123; // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; if (newThr == 0) &#123; float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; threshold = newThr; @SuppressWarnings(&#123;\"rawtypes\",\"unchecked\"&#125;) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab; if (oldTab != null) &#123; for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) &#123; oldTab[j] = null; if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); else &#123; // preserve order Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do &#123; next = e.next; if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab; &#125; resize()ä¸­ï¼Œå¯¹JDK1.7çš„resizeæ–¹æ³•è¿›è¡Œäº†æ”¹è¿›ï¼ŒJDK1.7ä¸­ï¼Œresizeæ–¹æ³•ä¼šå¯¼è‡´æ–°ç”Ÿæˆçš„é“¾è¡¨ä¸­çš„å…ƒç´ åœ¨åŸé“¾è¡¨ä¸­çš„é¡ºåºå˜ä¸ºç›¸åçš„é¡ºåºï¼ˆå› ä¸ºæ¯æ¬¡æ’å…¥éƒ½æ˜¯åœ¨å¤´éƒ¨è¿›è¡Œæ’å…¥ï¼Œè¯»å–åœ¨å¤´éƒ¨å¼€å§‹è¯»å–ï¼‰ï¼Œè€Œåœ¨jdk1.8ä¸­åˆ™ä¸ä¼šï¼Œä¼šä¿ç•™åŸæœ‰é¡ºåºï¼ˆå…ˆç”Ÿæˆé“¾è¡¨ï¼Œå†æŠŠå¤´æ”¾åˆ°talbeæ•°ç»„ä¸­ï¼‰ã€‚ç”±äºä¸Šè¿°åŸå› ï¼Œjdk1.7ä¸­å¯èƒ½ä¼šå¯¼è‡´nodeçš„æ­»å¾ªç¯ï¼Œä»è€Œå¸¦æ¥cpuä½¿ç”¨ç‡ä¸º100%çš„é—®é¢˜ã€‚è¯¥é—®é¢˜åœ¨1.8ä¸­å¹¶ä¸å­˜åœ¨ï¼ˆæ­»å¾ªç¯é—®é¢˜ä¸å­˜åœ¨ï¼‰ï¼Œä½†æ˜¯ä»ç„¶å¯èƒ½ä¼šå­˜åœ¨ä¸¢å¤±æ•°æ®çš„é—®é¢˜ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å‚è€ƒæ–‡ç« Java 8ç³»åˆ—ä¹‹é‡æ–°è®¤è¯†HashMap","tags":[{"name":"java8","slug":"java8","permalink":"https://yangle94.github.io/tags/java8/"},{"name":"HashMap","slug":"HashMap","permalink":"https://yangle94.github.io/tags/HashMap/"}]},{"title":"æŠ±æ­‰","date":"2018-01-31T12:07:33.000Z","path":"2018/01/31/wait/","text":"å› ä¸ºæœ€è¿‘æ¯”è¾ƒå¿™ï¼Œåè¿‡æ¥çœ‹çœ‹ï¼Œè¿™ä¸ªåšå®¢å·²ç»å¥½ä¹…æ²¡æœ‰æ›´æ–°è¿‡äº†ã€‚è¿™æ®µæ—¶é—´æ¥è§¦çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œæ€»ç®—æ˜¯èµ¶åœ¨å¹´å‰å®Œæˆäº†ï¼Œç»ˆäºèƒ½æœ‰æ—¶é—´æ¥æ•´ç†ä¸€ä¸‹æˆ‘çš„å¿ƒå¾—ä½“ä¼šï¼Œè¿‘æ®µæ—¶é—´ä¼šé™†ç»­è¿›è¡Œæ›´æ–°~~~","tags":[]},{"title":"ä½¿ç”¨dockerã€nginxã€nginx-genã€letsencryptä¸ªäººä¸»ç«™å‡çº§https","date":"2017-11-30T01:25:13.000Z","path":"2017/11/30/websiteHttps/","text":"å‡†å¤‡å·¥å…· docker docker-compose nginx é•œåƒ jwilder/docker-gen é•œåƒ jrcs/letsencrypt-nginx-proxy-companion é•œåƒ æ‰§è¡Œæ“ä½œ æ‹·è´ä¸€ä»½ .env.sample å¹¶æ”¹åä¸º.env 12cp .env.sample ./.env ä¿®æ”¹.envæ–‡ä»¶çš„å†…å®¹ 1234567891011NGINX_WEB=nginx-web #nginxçš„å®¹å™¨çš„åå­—DOCKER_GEN=nginx-gen #nginx-genå®¹å™¨çš„åå­—LETS_ENCRYPT=nginx-letsencrypt #letsencryptå®¹å™¨çš„åå­—IP=0.0.0.0 #å…¬ç½‘IPåï¼Œï¼ˆå¯ä»¥ä¸ç”¨ç®¡ï¼Œ0.0.0.0å°±å¥½ï¼‰# Network nameNETWORK=webproxy #docker networkçš„åå­—# NGINX file pathNGINX_FILES_PATH=/path/to/your/nginx/data #ä¸‰ä¸ªå®¹å™¨å…±äº«è·¯å¾„ æ‰§è¡Œ run.sh 12./run.sh æˆ–è€… sh run.sh è¿è¡Œä¸€ä¸ªæµ‹è¯•å®¹å™¨ 123456æ‰§è¡Œä¸€ä¸ªhttpåè®®è®¿é—®å®¹å™¨:docker run -d -e VIRTUAL_HOST=your.domain.com \\ --network=webproxy \\ --name my_app \\ httpd:alpine 123456789æ‰§è¡Œä¸€ä¸ªhttpsåè®®è®¿é—®å®¹å™¨:docker run -d -e VIRTUAL_HOST=your.domain.com \\ -e LETSENCRYPT_HOST=your.domain.com \\ -e LETSENCRYPT_EMAIL=your.email@your.domain.com \\ -e VIRTUAL_PORT=3000 #è®¾ç½®ç›‘å¬ç«¯å£ --network=webproxy \\ --name my_app \\ httpd:alpine æ­¤å¤„ï¼Œè¯·åŠ¡å¿…æŠŠæ‰€æœ‰éœ€è¦httpsä»£ç†çš„å®¹å™¨è·Ÿ nginxçš„ä¸‰ä¸ªå®¹å™¨æ”¾å…¥åŒä¸€ä¸ªnetworkä¸­ï¼åŸç†1.jwilder/docker-gené•œåƒç”¨æ¥åå‘ç”Ÿæˆnginxé…ç½®æ–‡ä»¶ï¼Œjrcs/letsencrypt-nginx-proxy-companioné•œåƒç”¨æ¥æ ¹æ®ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼ˆåŸŸåï¼‰ç”³è¯·httpsè¯ä¹¦ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœè¿‡æœŸï¼Œè‡ªåŠ¨ç”³è¯·æ–°çš„httpsè¯ä¹¦ã€‚ 2.å¦‚æœè¦å¯¹æ–°çš„dockeré•œåƒä½¿ç”¨httpsï¼Œè¯·åŠ¡å¿…å¸¦ä¸ŠLETSENCRYPT_HOSTã€ LETSENCRYPT_HOSTã€LETSENCRYPT_EMAILè¿™ä¸‰ä¸ªå±æ€§ã€‚","tags":[{"name":"Dockerã€Httpsã€Nginx","slug":"Dockerã€Httpsã€Nginx","permalink":"https://yangle94.github.io/tags/Dockerã€Httpsã€Nginx/"}]},{"title":"é€šè¿‡dockeråˆ›å»ºSonarQubeä»£ç è´¨é‡æ£€æµ‹å¹³å°","date":"2017-10-27T02:13:08.000Z","path":"2017/10/27/makeSonarQube/","text":"ä½œä¸ºä¸€ä¸ªç¨‹åºï¼Œæƒ³è¦å†™å‡ºæ›´å¥å£®çš„ä»£ç ï¼Œä¸€ä¸ªå¥½çš„ä»£ç æ£€æµ‹å·¥å…·æ˜¯å¿…ä¸å¯å°‘çš„ã€‚æŸå¤©çªç„¶å‘ç°äº†ä¸€ä¸ªä»£ç æ£€æµ‹å¹³å°å·¥å…·SonarQubeï¼Œæƒ³è¦å®‰è£…ä¸€ä¸‹ï¼Œå‘ç°æœ‰dockerç‰ˆæœ¬çš„ï¼Œç‰¹åˆ«æ¥å®‰åˆ©ä¸€ä¸‹ã€‚ 1. å®‰è£…postgresql1docker run --name postgresql -e POSTGRES_USER=sonarqube -e POSTGRES_PASSWORD=sonarqube -d postgres 2. å®‰è£…sonarqube1docker run --name sq --link postgresql -e SONARQUBE_JDBC_URL=jdbc:postgresql://postgresql:5432/sonarqube -e SONARQUBE_JDBC_USERNAME=sonarqube -e SONARQUBE_JDBC_PASSWORD=sonarqube -p 9000:9000 -d sonarqube 3. å¹³å°æ­å»ºå®Œæˆ æ‰“å¼€ localhost:9000ï¼Œè¿›è¡Œç™»å½•ï¼Œï¼ˆåˆå§‹è´¦æˆ·ä¸ºadmin,adminï¼‰ï¼Œç™»å½•æˆåŠŸåä¼šæœ‰æ•™ç¨‹å¼¹å‡ºã€‚ 2.æ±‰åŒ–ï¼š 4 é™„ä¸Šé“¾æ¥sonarqube docker hubåœ°å€spring4all æ•™ç¨‹åœ°å€æ±‰åŒ–å‚è€ƒ","tags":[{"name":"Dockerã€SonarQube","slug":"Dockerã€SonarQube","permalink":"https://yangle94.github.io/tags/Dockerã€SonarQube/"}]},{"title":"SpringCloudè®°å½•ç‚¹","date":"2017-09-26T03:32:35.000Z","path":"2017/09/26/springCloudUtil/","text":"å¿½ç•¥ç½‘ç»œæ¥å£application.yml: 123456spring: cloud: inetutils: ignoredInterfaces: - docker0 - veth.* ä»£ç ä½ç½®:org.springframework.cloud.commons.util.InetUtilsProperties 1234/** * List of Java regex expressions for network addresses that will be * preferred. */private List&lt;String&gt; preferredNetworks = new ArrayList&lt;&gt;(); è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªä¸€ä¸ªç½‘ç»œå·¥å…·ç±»çš„é…ç½®æ–‡ä»¶å±æ€§ç±»ï¼Œç”±æ³¨é‡Šå¯å¾—ï¼ŒpreferredNetworksæ‰¿è½½äº†æ‰€æœ‰éœ€è¦è¿›è¡Œå¿½ç•¥çš„ç½‘ç»œè¿æ¥åçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æŸ¥çœ‹å…¶ä½¿ç”¨ä½ç½® 123456789boolean ignoreInterface(String interfaceName) &#123; for (String regex : this.properties.getIgnoredInterfaces()) &#123; if (interfaceName.matches(regex)) &#123; log.trace(\"Ignoring interface: \" + interfaceName); return true; &#125; &#125; return false; &#125; æŸ¥çœ‹ignoreInterfaceæ‰€è°ƒç”¨çš„ä½ç½®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public InetAddress findFirstNonLoopbackAddress() &#123; InetAddress result = null; try &#123; int lowest = Integer.MAX_VALUE; for (Enumeration&lt;NetworkInterface&gt; nics = NetworkInterface .getNetworkInterfaces(); nics.hasMoreElements();) &#123; NetworkInterface ifc = nics.nextElement(); if (ifc.isUp()) &#123; log.trace(\"Testing interface: \" + ifc.getDisplayName()); if (ifc.getIndex() &lt; lowest || result == null) &#123; lowest = ifc.getIndex(); &#125; else if (result != null) &#123; continue; &#125; // @formatter:off if (!ignoreInterface(ifc.getDisplayName())) &#123; for (Enumeration&lt;InetAddress&gt; addrs = ifc .getInetAddresses(); addrs.hasMoreElements();) &#123; InetAddress address = addrs.nextElement(); if (address instanceof Inet4Address &amp;&amp; !address.isLoopbackAddress() &amp;&amp; !ignoreAddress(address)) &#123; log.trace(\"Found non-loopback interface: \" + ifc.getDisplayName()); result = address; &#125; &#125; &#125; // @formatter:on &#125; &#125; &#125; catch (IOException ex) &#123; log.error(\"Cannot get first non-loopback address\", ex); &#125; if (result != null) &#123; return result; &#125; try &#123; return InetAddress.getLocalHost(); &#125; catch (UnknownHostException e) &#123; log.warn(\"Unable to retrieve localhost\"); &#125; return null; &#125; SpringCloudè¿›è¡Œæ³¨å†Œçš„æ—¶å€™ä¼šè°ƒç”¨æœ¬åœ°æ–¹æ³•è·å¾—å½“å‰å®¿ä¸»æœºçš„ç½‘ç»œä¿¡æ¯ï¼Œåœ¨*nixä¸‹ï¼ˆåŒ…æ‹¬Macï¼‰ï¼Œç±»ä¼¼äºifconfigå‘½ä»¤æ‰€æ˜¾ç¤ºçš„å†…å®¹ï¼Œä¼šéå†å…¶ä¸­çš„å†…å®¹ï¼Œæ‰€æœ‰ç½‘å¡ä¸‹åˆ°ä¸Šï¼Œç„¶ååˆ†åˆ«æ¯ä¸ªç½‘å¡å†…éƒ¨çš„åœ°å€ï¼Œä¿ç•™æœ€åä¸€ä¸ªéå›ç¯åœ°å€ã€‚ æˆ‘åœ¨å½“æŸå°Linuxæœºå™¨ï¼ˆå®¿ä¸»æœºï¼‰å®‰è£…äº†dockerçš„æ—¶å€™ï¼Œä¼šå®‰è£…ä¸€ä¸ªdocker0çš„ç½‘æ¡¥ï¼Œdocker0çš„ç½‘æ¡¥ä¼šåœ¨å®¿ä¸»æœºçš„ç¬¬ä¸€ä¸ªï¼Œå¯¼è‡´åœ¨å®¿ä¸»æœºä¸Šè¿è¡Œçš„springbootï¼ˆdubboä¹Ÿä¼šï¼‰ä¼šæ‹¿åˆ°é”™è¯¯çš„IPä¿¡æ¯ï¼Œå½“æŠŠdocker0ç½‘å¡åŠ å…¥åˆ°è¿™ä¸ªé‡Œå¤´ä¹‹åï¼Œå°±ä¼šé¿å…è¿™ä¸ªé—®é¢˜ã€‚ å¼ºåˆ¶ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åœ°å€ä»¥åŠä»…ä½¿ç”¨ç«™ç‚¹æœ¬åœ°åœ°å€123456spring: cloud: inetutils: preferredNetworks: - 192.168 - 10.0 æ­¤é…ç½®åŒæ ·ä½äºorg.springframework.cloud.commons.util.InetUtilsProperties 1234/** * Use only interfaces with site local addresses. See &#123;@link InetAddress#isSiteLocalAddress()&#125; for more details. */private boolean useOnlySiteLocalInterfaces = false; æŸ¥çœ‹å‚æ•°ä½¿ç”¨ä½ç½®ï¼š 123456boolean ignoreAddress(InetAddress address) &#123; if (this.properties.isUseOnlySiteLocalInterfaces() &amp;&amp; !address.isSiteLocalAddress()) &#123; log.trace(\"Ignoring address: \" + address.getHostAddress()); return true; &#125; ç”±æ­¤å¯è§ï¼Œå½“ä¸è®¾ç½®çš„æ—¶å€™ï¼ŒuseOnlySiteLocalInterfacesé»˜è®¤å€¼ä¸ºfalseï¼Œä¸ç®¡æ‹¿åˆ°çš„æ˜¯å…¬ç½‘åœ°å€è¿˜æ˜¯å†…ç½‘åœ°å€ï¼Œç›´æ¥è¿›è¡Œå¯¹ä¸‹é¢æ­£åˆ™çš„åŒ¹é…ï¼Œå½“æ­£åˆ™ä¸åŒ¹é…å¹¶ä¸”åœ°å€ä¸æ˜¯ä»¥regexå¼€å¤´çš„ï¼Œä¼šè¿”å›trueï¼ˆæ³¨æ„æ–¹æ³•åæ˜¯ignoreAddressï¼Œtrueè¡¨ç¤ºå¿½ç•¥ï¼Œfalseè¡¨ç¤ºä¸å¿½ç•¥ï¼‰ï¼Œå¦‚æœä¸åŒ¹é…åˆ™è¿”å›falseï¼›å½“useOnlySiteLocalInterfacesè®¾ç½®ä¸ºtrueæ—¶ï¼Œå¦‚æœæ­¤IPåœ°å€ä¸æ˜¯å†…ç½‘åœ°å€ï¼Œåˆ™ç›´æ¥è¿”å›trueï¼Œå¦‚æœæ˜¯å†…ç½‘åœ°å€ï¼Œåˆ™è¿›è¡Œæ­£åˆ™åŒ¹é…ã€‚","tags":[{"name":"SpringCloud","slug":"SpringCloud","permalink":"https://yangle94.github.io/tags/SpringCloud/"}]},{"title":"Macä¸‹hexoå»ºç«™","date":"2017-05-26T08:46:38.000Z","path":"2017/05/26/creatHexo/","text":"åˆšå¼€å§‹å»ºç«™çš„æ—¶å€™è¯´è¿‡å†™ä¸€ç¯‡å»ºç«™æ•™ç¨‹ï¼Œç”±äºå½“æ—¶å»ºç«™ä»¥åå› ä¸ºå·¥ä½œä¸Šçš„å„ç§äº‹å„¿ç»™è€½è¯¯äº†ï¼Œä»¥åå°±å†ä¹Ÿæ²¡å·¥å¤«å†™äº†ï¼Œä»Šå¤©ç‰¹åœ°æ¥è¡¥ä¸Šã€‚ å‡†å¤‡ææ–™ GitHubPagesä»“åº“ Node.js homebrew hexo git(ç”±äºMacè‡ªå¸¦äº†ï¼Œå°±ä¸éœ€è¦äº†) githubä¸Šåˆ›å»ºGitHubPagesä»“åº“git å®˜æ–¹å‚è€ƒåœ°å€: https://pages.github.com æ³¨æ„ï¼š åˆ›å»ºä»“åº“çš„æ—¶å€™ä»“åº“åä¸€å®šä¸¥æ ¼æŒ‰ç…§ gitç”¨æˆ·å.github.io æ¥å‘½å åˆ›å»ºä»“åº“å®Œæˆä¹‹å,å†å»åˆ›å»ºä¸€ä¸ªå…¶ä»–çš„ä»“åº“ï¼Œç”¨äºä¿å­˜hexoçš„æ•´ä¸ªç›®å½•ï¼Œç”¨æ¥å½“å¤‡ä»½ä½¿ç”¨ï¼Œåå­—éšä¾¿å–ã€‚ å®‰è£… homebrewhomebrewæ˜¯Macä¸‹çš„è½¯ä»¶ç®¡ç†ç¨‹åºï¼Œç±»ä¼¼äºcentosçš„yumã€‚ homebrewå®˜æ–¹ç½‘ç«™ ä¸‹è½½å®‰è£…æ–¹æ³•ã€æ›´æ¢å›½å†…é•œåƒæºç­‰è¯¦æƒ…è¯·googleï¼Œç›®å‰æˆ‘åœ¨è¿™é‡Œä»…ä»…æä¾›éƒ¨åˆ†å‘½ä»¤ 12brew update æ›´æ–°brewåˆ—è¡¨brew search node.js æŸ¥è¯¢node.jsï¼ˆå¯ä»¥æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬çš„node.jsï¼Œç„¶åbrew install node7.jsï¼‰ hexoå®‰è£…hexohexoå®˜æ–¹ç½‘ç«™ 1npm install -g hexo-cli å®‰è£…hexoå®¢æˆ·ç«¯ å»ºç«™å®‰è£…å®Œæˆhexoåï¼Œæ‰§è¡Œå»ºç«™å‘½ä»¤ã€‚ 123hexo init &lt;ä½ è¦å­˜æ”¾çš„ç›®å½•&gt;cd &lt;ä½ è¦å­˜æ”¾çš„ç›®å½•&gt;npm install é…ç½®æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š .â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes æ‰“å¼€_config.ymlï¼Œæ­¤ç½‘ç«™çš„å¤§éƒ¨åˆ†é…ç½®éƒ½åœ¨é‡Œé¢ã€‚ å‚æ•° æè¿° title ç½‘ç«™æ ‡é¢˜ subtitle ç½‘ç«™å‰¯æ ‡é¢˜ description ç½‘ç«™æè¿° author æ‚¨çš„åå­— language ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ timezone ç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚æ—¶åŒºåˆ—è¡¨ã€‚æ¯”å¦‚è¯´ï¼šAmerica/New_York, Japan, å’Œ UTC ã€‚ gitè´¦æˆ·åœ°å€ä»¥åŠåˆ†æ”¯ deploy: type: git repository: git@github.com:yangle94/yangle94.github.io.git branch: master ç½‘å€ï¼šè¯·æŠŠä½ åˆšæ‰ç”³è¯·çš„githubpagesçš„åœ°å€æ”¾åˆ°è¿™é‡Œçš„url,ä¾‹å¦‚æˆ‘çš„æ˜¯https://yangle94.github.ioï¼Œ å°±æŠŠä»–æ”¾åˆ°urlåã€‚ å‚æ•° æè¿° é»˜è®¤å€¼ url ç½‘å€ root ç½‘ç«™æ ¹ç›®å½• permalink æ–‡ç« çš„ æ°¸ä¹…é“¾æ¥ æ ¼å¼ :year/:month/:day/:title/ permalink_defaults æ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼ åˆ‡è®°åˆ‡è®°ï¼Œymlæ–‡ä»¶æœ‰ç‰¹æ®Šçš„é…ç½®ï¼Œç±»ä¼¼äºé”®å€¼å¯¹çš„ :åä¸€å®šè¦æœ‰ä¸ªç©ºæ ¼ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼ï¼ï¼ hexoå‘½ä»¤ç®€ä»‹1234hexo s å¼€å¯æœ¬åœ°è®¿é—®æœåŠ¡å™¨hexo d ä¸Šä¼ æ–‡ä»¶hexo g ç”Ÿæˆé™æ€æ–‡ä»¶hexo clean æ¸…ç†æœ¬åœ°é™æ€æ–‡ä»¶ å¤‡ä»½åœ¨ä½ åˆšæ‰åˆ›å»ºçš„ç›®å½•ä¸‹ï¼Œä½¿ç”¨gitå¯¹æºç è¿›è¡Œå¤‡ä»½ï¼Œé˜²æ­¢ä¸¢å¤±ã€‚ åœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ä¸“é—¨ç”¨æ¥å­˜å‚¨æ­¤å¤„çš„æºä»£ç ï¼Œå…·ä½“æ“ä½œåœ¨githubä¸Šåˆ›å»ºä»“åº“çš„æ—¶å€™ä¼šæœ‰æç¤ºï¼Œå†æ­¤ä¸è¿›è¡Œæ•™ç¨‹äº†ã€‚ å¸Œæœ›å¤§å®¶çœ‹å®Œä»¥åæ—©æ—¥æ‹¥æœ‰è‡ªå·±çš„åšå®¢ğŸ˜","tags":[{"name":"Mac","slug":"Mac","permalink":"https://yangle94.github.io/tags/Mac/"},{"name":"hexo","slug":"hexo","permalink":"https://yangle94.github.io/tags/hexo/"}]},{"title":"ä¸šåŠ¡æ“ä½œæ•°æ®åº“æ—¶çš„æ³¨æ„äº‹é¡¹","date":"2017-04-07T02:32:18.000Z","path":"2017/04/07/DBPrecautions/","text":"ä¸€æ¬¡æ•°æ®åº“å´©æºƒå¼•å‘çš„æ€è€ƒ å‰ä¸¤å¤©ï¼Œå› ä¸ºå†™ä¸šåŠ¡ï¼Œæ“ä½œæ•°æ®åº“ï¼Œå› ä¸ºsqlä¸å½“æ“ä½œï¼Œå¯¼è‡´äº†æ•°æ®åº“çš„å´©æºƒï¼Œç‰¹æ­¤å°†å…¶æ‹¿å‡ºè¿›è¡Œåæ€å’Œæ€è€ƒã€‚ èµ·å› :ç”±äºä¸šåŠ¡çš„åŸå› ï¼Œä¸ºäº†ä¿ç•™å†å²è®°å½•ï¼Œæ‰€ä»¥æˆ‘åœ¨åˆ é™¤çš„æ—¶å€™ä½¿ç”¨äº†delete_flagè¿›è¡Œé€»è¾‘åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œåˆ é™¤å‘½ä»¤å°±å˜ä¸ºäº† 12SELECT * FROM tableNmae WHERE delete_flag = 0 UPDATE SET delete_flag = 1 FROM tableNmae = ? åˆ†ææ­¤æ—¶ï¼Œè™½ç„¶çœ‹ä¼¼å·²ç»å®ç°äº†ç¨‹åºæ‰€éœ€è¦çš„åŠŸèƒ½ï¼Œå…¶å®éšå«ç€å¾ˆå¤§çš„é—®é¢˜ã€‚å½“æ•°æ®åº“å¢åŠ ã€åˆ é™¤é¢‘ç‡ä»¥åŠæ•°æ®åº“æ¡æ•°å¾ˆå¤§çš„æ—¶å€™ï¼Œæ­¤é—®é¢˜ä¼šæš´éœ²çš„ååˆ†ä¸¥é‡ï¼Œç”šè‡³æ•°æ®åº“çš„å´©æºƒã€‚ é¦–å…ˆï¼Œæˆ‘æƒ³è¯´çš„æ˜¯é€»è¾‘åˆ é™¤å¹¶éä¸å¯ç”¨ï¼Œä¸è¿‡è¦åˆ‡å®é…åˆå¥½insertä»¥åŠæŸ¥è¯¢ï¼Œä¿è¯æ•°æ®åº“ä¸­çš„é‡å¤ç‡ä¸ä¼šå¤ªé«˜ã€‚æˆ‘å½“æ—¶çš„é”™è¯¯çš„åšæ³•ï¼šä½¿ç”¨selectè¯­å¥å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå­˜åœ¨æ£€æµ‹ï¼Œå¦‚æœä¸å­˜åœ¨å°±å¢åŠ ä¸€æ¡ï¼Œå³SELECT * FROM tableNmae WHERE delete_flag = 0 â€”â€”-ã€‹ INSERT INTO tableName () VALUES (),å¦‚æœæœ‰æ•°æ®ï¼Œå°±è·³è¿‡ã€‚åˆ é™¤æ—¶ï¼Œç›´æ¥è°ƒç”¨UPDATE SET delete_flag = 1 FROM tableNmae = ?ã€‚æ­¤æ—¶ï¼Œå¦‚æœåˆ é™¤ã€å¢åŠ çš„æ•°é‡ä¸€å¤šï¼Œæ•°æ®åº“ä¸­ä¼šå­˜åœ¨éå¸¸å¤šçš„å·²åˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”åœ¨é€»è¾‘åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œå¹¶æœªåŠ å…¥WHERE delete_flag = 0ï¼Œå¯¼è‡´ä¼šå°†æ‰€æœ‰çš„å·²ç»é€»è¾‘åˆ é™¤çš„æ•°æ®å†æ¬¡çš„åˆ é™¤ä¸€éï¼Œæ•°æ®é‡ä¸€å¤§ï¼Œç›´æ¥ä¼šå°†æ•°æ®åº“æ‹‰å´©æºƒï¼Œæˆ‘å½“æ—¶é€»è¾‘åˆ é™¤ä¸€æ¡æ•°æ®æ‰€å ç”¨çš„è®°å½•æ•°åŸºæœ¬åˆ°äº†1000æ¡ï¼Œåœ¨é«˜å³°æ—¶æ®µç›´æ¥å¯¼è‡´äº†æ•°æ®åº“å´©æºƒã€‚ è§£å†³ä¹‹é“ï¼šé’ˆå¯¹æ­¤æœ‰å‡ ç§è§£å†³æ–¹æ³•: æœ€ç®€å•çš„æ–¹æ³•ï¼šå°†é€»è¾‘åˆ é™¤æ¢ä¸ºç‰©ç†åˆ é™¤ï¼Œè¿™æ ·æ— è®ºä¼šæœ‰å¤šå°‘æ¬¡çš„é‡å¤åŠ å…¥æ•°æ®ï¼Œåœ¨ç´¯åŠ çš„è¿‡ç¨‹ä¸­åªä¼šä¿è¯ä¸€æ¡æœªåˆ é™¤æ•°æ®çš„å­˜åœ¨ã€‚ å¯¹é€»è¾‘åˆ é™¤åŠ å…¥WHERE delete_flag = 0 è¿™ä¸ªæ¡ä»¶ï¼Œç”¨äºå‡å°‘ä¸€æ¬¡æ€§æ›´æ–°çš„æ¡æ•°ã€‚æ¯æ¬¡æ–°å¢å‰æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„å·²ç»è¢«åˆ é™¤ç›¸åŒæ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ™é€»è¾‘åˆ é™¤å…¶å®ƒæœªåˆ é™¤çš„æ•°æ®ï¼Œç„¶åå°†è¿™æ¡æ•°æ®çš„åˆ é™¤ä½æ ‡è¯†æ›´æ”¹ä¸º0ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¿›è¡Œå¢åŠ ã€‚ æ€»ç»“ï¼šå¯¹äºé¢‘ç¹çš„æ•°æ®æ“ä½œè€Œè¨€ï¼Œä¸€å®šè¦è®°å¾—åŠ å…¥whereæ¡ä»¶ä½¿udpateè¯­å¥æ›´æ–°æœ€å°çš„æ•°é‡ï¼ï¼ï¼ï¼","tags":[{"name":"Java","slug":"Java","permalink":"https://yangle94.github.io/tags/Java/"},{"name":"AutoCloseable","slug":"AutoCloseable","permalink":"https://yangle94.github.io/tags/AutoCloseable/"}]},{"title":"swagger-uiæ³¨è§£","date":"2017-03-14T02:30:50.000Z","path":"2017/03/14/swagger-annotation/","text":"ä»Šå¤©ä½¿ç”¨swaggerçš„æ—¶å€™å‡ºç°äº†ä¸å°‘ä¸€ç‚¹é—®é¢˜ï¼Œbodyä¼ ä¸Šæ¥çš„Jsonå­—ç¬¦ä¸²åœ¨swagger-uiä¸Šçš„å½¢å¼æ€»æ˜¯ä¸ç¬¦åˆæˆ‘çš„æ„æ„¿ï¼Œæˆ‘æ‰¾äº†å¥½ä¹…æ‰æ‰¾åˆ°äº†é—®é¢˜ã€‚ç‰¹åˆ«æ¥è®°å½•ä¸€ä¸‹ã€‚ æ³¨è§£åˆ—è¡¨@Apiç”¨åœ¨ç±»ä¸Šï¼Œè¯´æ˜è¯¥ç±»çš„ä½œç”¨ @ApiOperationç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ä½œç”¨(å½“æ–¹æ³•æ‰€éœ€å‚æ•°ä¸ºå¯¹è±¡æ—¶ï¼Œ) @ApiImplicitParamsã€@ApiImplicitParam@ApiImplicitParams({ @ApiImplicitParam})ç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢paramType:å‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹&gt;headerâ€“&gt;è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeaderqueryâ€“&gt;è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParampathï¼ˆç”¨äºrestfulæ¥å£ï¼‰â€“&gt;è¯·æ±‚å‚æ•°çš„è·å–ï¼š@PathVariablebodyï¼ˆä¸å¸¸ç”¨ï¼‰formï¼ˆä¸å¸¸ç”¨ï¼‰nameï¼šå‚æ•°ådataTypeï¼šå‚æ•°ç±»å‹requiredï¼šå‚æ•°æ˜¯å¦å¿…é¡»ä¼ valueï¼šå‚æ•°çš„æ„æ€defaultValueï¼šå‚æ•°çš„é»˜è®¤å€¼ @ApiResponsesç”¨äºè¡¨ç¤ºä¸€ç»„å“åº” @ApiResponseç”¨åœ¨@ApiResponsesä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯codeï¼šæ•°å­—ï¼Œä¾‹å¦‚400messageï¼šä¿¡æ¯ï¼Œä¾‹å¦‚â€è¯·æ±‚å‚æ•°æ²¡å¡«å¥½â€responseï¼šæŠ›å‡ºå¼‚å¸¸çš„ç±» @ApiModelæè¿°ä¸€ä¸ªModelçš„ä¿¡æ¯ï¼ˆè¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™ï¼Œä½¿ç”¨@RequestBodyè¿™æ ·çš„åœºæ™¯ï¼Œè¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨@ApiImplicitParamæ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™ï¼‰ @ApiModelPropertyæè¿°ä¸€ä¸ªmodelçš„å±æ€§ æ³¨æ„äº‹é¡¹å¯¹äº@ApiImplicitParamsã€@ApiImplicitParamã€@ApiModelã€@ApiModelPropertyçš„ä½¿ç”¨æƒ…æ™¯ã€‚é¦–å…ˆï¼Œå¯¹äºç±»ä¼¼application/x-www-form-urlencodedç­‰é™¤äº†application/jsonä»¥å¤–çš„ä¼ è¾“æ–¹å¼ï¼Œå…¶ä¼ è¾“å†…å®¹å®è´¨ä¸Šæ˜¯K-Vçš„æ–¹å¼è¿›è¡Œä¼ é€’çš„ï¼Œæ­¤æ—¶å¯ä»¥ç”¨@ApiImplicitParamsã€@ApiImplicitParamå¯¹æ‰€ä¼ å…¥çš„å‚æ•°è¿›è¡Œæè¿°ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨application/jsonçš„æ–¹å¼ä¼ è¾“JSONå­—ç¬¦ä¸²ï¼Œè¿™ç§è¡¨ç¤ºæ–¹å¼æ˜¯ä¸å¯ç”¨çš„ï¼Œå› ä¸ºæ— æ³•å‡†ç¡®è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ®µæ‰€ä»£è¡¨çš„å€¼ã€‚æ­¤æ—¶ï¼Œå°±åº”è¯¥ä½¿ç”¨ 1234@ApiOperation(value=\"ä½¿ç”¨httpClientçˆ¬å–é¡µé¢\", notes=\"ä½¿ç”¨httpClientçˆ¬å–é¡µé¢\", produces = \"application/json\")@ApiImplicitParam(name = \"pageInfoDto\", value = \"ç”¨æˆ·è¯¦ç»†å®ä½“user\", required = true, dataType = \"PageInfoDto\", paramType = \"body\")@RequestMapping(\"getValue\")public Result getValue(@RequestBody PageInfoDto pageInfoDto) &#123;&#125; è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ä¸€ä¸ª@ApiImplicitParamæ¥æè¿°æ‰€ä¼ JSONçš„ä¿¡æ¯ï¼Œåƒä¸‡ä¸å¯ä»¥ç”¨@ApiImplicitParamsï¼Œå¦åˆ™swagger-uiçš„ç•Œé¢ä¸Šä¼šå‡ºç°å¼‚å¸¸çš„å‚æ•°å½¢å¼ã€‚æ­¤æ—¶ï¼Œå¯ä»¥é…åˆ@ApiModelã€ @ApiModelPropertyåœ¨å½“å‰å‚æ•°çš„å®ä½“ç±»ä¸Šå¯¹ä¿¡æ¯è¿›è¡Œæè¿°ã€‚","tags":[{"name":"swagger-ui","slug":"swagger-ui","permalink":"https://yangle94.github.io/tags/swagger-ui/"}]},{"title":"mavenä¸Šä¼ æ–‡ä»¶åˆ°ç§åº“","date":"2017-03-08T03:14:14.000Z","path":"2017/03/08/maven-uploadJar/","text":"ä»Šå¤©å› ä¸ºåœ¨æœåŠ¡å™¨ç«¯å¯¹webpè¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œå‘ç°å¯¹äºwebpçš„jaråœ¨mavençš„ä»“åº“é‡Œå¹¶æ²¡æœ‰å‘ç°ã€‚äºæ˜¯åªå¥½è‡ªå·±æŠŠwebpçš„jaråŠ å…¥äº†mavenç§æœã€‚å°†ä»£ç è¿›è¡Œcopyï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚12345å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“ï¼šmvn install:install-file -DgroupId=[groupId] -DartifactId=[artifactId] -Dversion=[version] -Dpackaging=jar -Dfile=[path to file] å‘å¸ƒåˆ°Nexusä»“åº“ï¼šmvn deploy:deploy-file -DgroupId==[groupId] -DartifactId=[artifactId] -Dversion=[version] -Dpackaging=jar -Dfile=[path to file] -Durl=[url] -DrepositoryId=[id]","tags":[{"name":"maven","slug":"maven","permalink":"https://yangle94.github.io/tags/maven/"}]},{"title":"å¸¦æœ‰èµ„æºçš„tryè¯­å¥ï¼ˆAutoCloseableï¼‰","date":"2017-03-08T01:45:02.000Z","path":"2017/03/08/AutoCloseable-Interface/","text":"ä»Šå¤©åœ¨å…³é—­è¾“å…¥è¾“å‡ºæµçš„æ—¶å€™ï¼Œè§‰å¾—æ€»æ˜¯æ‰‹åŠ¨å»å…³é—­å¤ªéº»çƒ¦ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆç®€å•çš„æ–¹æ³•ã€‚äºæ˜¯ä¹å‘ç°äº†AutoCloseableè¿™ä¸ªæ¥å£ã€‚ é‡ç”³ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦æ‰‹åŠ¨å…³é—­è¾“å…¥è¾“å‡ºæµå¯¹äºå¹³å¸¸çš„Javaå¯¹è±¡æ¥è¯´ï¼Œå¦‚æœJavaçš„gcæœºåˆ¶å‘ç°æŸä¸ªå¯¹è±¡å·²ç»ä¸å¯åˆ°è¾¾ï¼Œå°±ä¼šå¯åŠ¨å¯¹æ­¤å¯¹è±¡çš„å†…å­˜å›æ”¶æœºåˆ¶ã€‚å½“ç„¶ï¼Œä»–ä»€ä¹ˆæ—¶å€™èƒ½å¤ŸæŠŠå¯¹è±¡å›æ”¶å®Œäº†ï¼Œæ˜¯æ ¹æ®æ“ä½œç³»ç»Ÿçš„è°ƒåº¦æ¥å†³å®šçš„ï¼Œå¹¶ä¸æ˜¯è¯´gcæœºåˆ¶ä¸€èµ·åŠ¨ï¼Œå°±èƒ½ç«‹åˆ»å›æ”¶æ­¤å¯¹è±¡çš„å†…å­˜ã€‚ä½†æ˜¯å¯¹äºInputStreamå’ŒOutputStreamä»¥åŠä»–ä»¬çš„å­ç±»æ¥è¯´ï¼Œå¦‚æœå¼€å¯äº†æŸä¸ªæµï¼Œå°±ä¼šæœ‰æ“ä½œç³»ç»Ÿä¹‹å¤–çš„èµ„æºä¾é™„åœ¨æŸä¸ªJavaå¯¹è±¡ä¸Šï¼Œè¿™å°±å¯¼è‡´gcè®¤ä¸ºå…¶å®æ´»ç€çš„ï¼Œè€Œä¸æ˜¯æ­»äº¡çš„ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½å‡ºå‘gcæœºåˆ¶ã€‚ AutoCloseableæ¥å£åœ¨Java1.7ä¸­æä¾›äº†æ–°çš„AutoCloseableæ¥å£ï¼Œä»¥å‰çš„Closeableæ¥å£æ‰©å±•äº†AutoCloseableæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„å®ç°äº†Closeableæ¥å£çš„è¾“å…¥è¾“å‡ºæµå…¨éƒ¨å®ç°äº†AutoCloseableæ¥å£ï¼Œå°±æ˜¯è¯´æ‰€æœ‰çš„è¾“å…¥è¾“å‡ºæµéƒ½èƒ½è¿›è¡Œå¸¦èµ„æºçš„try catchè¯­å¥ã€‚ 12345678910public class InputStreamReaderTest &#123; public static void main(String[] args) &#123; try(BufferedReader reader = new BufferedReader(new InputStreamReader( new FileInputStream(new File(\"/home/angle/test.webp\")),\"UTF8\"),1024))&#123; System.out.println(reader.readLine()); //è¿™é‡Œç›´æ¥è¯»ä¸€è¡Œ &#125;catch(IOException e)&#123; e.printStackTrace(); &#125; &#125;&#125; æ­¤æ—¶ï¼Œå°±ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å»å…³é—­è¾“å…¥ã€è¾“å‡ºæµäº†ï¼Œå¸¦èµ„æºçš„tryå—å„¿ä¼šå¸®æˆ‘ä»¬æŠŠèµ„æºç®¡ç†å¥½ã€‚ æ³¨ï¼šå…³äºå¸¦èµ„æºçš„tryè¯­å¥çš„3ä¸ªå…³é”®ç‚¹ï¼šç”±å¸¦èµ„æºçš„tryè¯­å¥ç®¡ç†çš„èµ„æºå¿…é¡»æ˜¯å®ç°äº†AutoCloseableæ¥å£çš„ç±»çš„å¯¹è±¡ã€‚ åœ¨tryä»£ç ä¸­å£°æ˜çš„èµ„æºè¢«éšå¼å£°æ˜ä¸ºfianlã€‚ é€šè¿‡ä½¿ç”¨åˆ†å·åˆ†éš”æ¯ä¸ªå£°æ˜å¯ä»¥ç®¡ç†å¤šä¸ªèµ„æºã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://yangle94.github.io/tags/Java/"},{"name":"AutoCloseable","slug":"AutoCloseable","permalink":"https://yangle94.github.io/tags/AutoCloseable/"}]},{"title":"è€ƒè™‘ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å‡½æ•°","date":"2017-03-02T14:04:54.000Z","path":"2017/03/02/staticFactory/","text":"é™æ€å·¥å‚æ–¹æ³•ä¼˜ç‚¹ é™æ€å·¥å‚æ–¹æ³•æœ‰åç§°ï¼Œæ ¹æ®åç§°å¯ä»¥åšåˆ°è§æ–‡çŸ¥æ„ã€‚å¯¹äºæ„é€ æ–¹æ³•è€Œè¨€ï¼Œç”±äºæ–¹æ³•ç­¾åçš„åŸå› ï¼Œä¸€ä¸ªç±»åªå¯èƒ½ä¸€ç§ç›¸åŒçš„æ–¹æ³•ç­¾åï¼Œå½“ç„¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°é¡ºåºæ¥å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ï¼Œç›¸åŒå‚æ•°å®¹æ˜“è®©äººæ··ä¹±ï¼Œè€Œä¸”æœ‰å¯èƒ½é”™è¿‡äº†ç¼–è¯‘å™¨çš„å¼‚å¸¸ã€‚ é™æ€å·¥å‚æ–¹æ³•å¯ä»¥ä¸å¿…æ¯æ¬¡è°ƒç”¨å®ƒçš„æ—¶å€™éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ å¯ä»¥è¿”å›åŸè¿”å›ç±»å‹çš„ä»»ä½•å­ç±»å‹å¯¹è±¡ã€‚1234567891011121314151617181920212223242526272829303132333435363738public interface Service&#123; //do something&#125;public interface Provider&#123; Service newService();&#125;public class Service &#123; //ä¸å…è®¸å¤–éƒ¨å®ä¾‹åŒ– private Service()&#123;&#125;; private static final Map&lt;String,Provider&gt; providers = new ConcurrentHashMap&lt;&gt;(); public static final String defKey = \"&lt;def&gt;\"; //æ³¨å†Œ public static void registerDefaultProvider(Provider provider) &#123; registerProvider(defKey, provider); &#125; public static void registerDefaultProvider(String name, Provider provider) &#123; providers.put(name, provider); &#125; //è·å– public static Service newInstance() &#123; return newInstance(defkey); &#125; public static Service newInstance(String name) &#123; Provider p = providers.get(name); if(null == p) throw new IlleaglArgumentException(\"No provider registered with name : \" + name); return p.newService(); &#125;&#125; ç¼ºç‚¹: ç±»å¦‚æœä¸å«æœ‰å…¬æœ‰æˆ–è€…å—ä¿æŠ¤çš„æ„é€ æ–¹æ³•ï¼Œå°±ä¸èƒ½è¢«å­ç±»åŒ–ã€‚å› ç¥¸å¾—ç¦çš„æ˜¯ï¼Œæˆ‘ä»¬é¼“åŠ±å¤åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚ é™æ€å·¥å‚æ–¹æ³•ä¸æ™®é€šé™æ€æ–¹æ³•æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œâ€œèµ¶ç€ä¸€ç­‰å…¬æ°‘ï¼ˆæ„é€ æ–¹æ³•ï¼‰çš„æ´»å„¿ï¼Œå´äº«å—ä¸åˆ°ä¸€ç­‰å…¬æ°‘çš„å¾…é‡ï¼ˆJavadocç­‰å·¥å…·å¹¶ä¸å…³æ³¨é™æ€å·¥å‚æ–¹æ³•) ä½•æ—¶åº”è¯¥ç”¨é™æ€å·¥å‚æ–¹æ³• å¦‚æœéœ€è¦å¤§é‡å«æœ‰å…±åŒç­¾åçš„æ„é€ æ–¹æ³•çš„æ—¶å€™ã€‚ æ¯æ¬¡è¿”å›çš„å¯¹è±¡æ˜¯ä¸å¯å˜ç±»çš„æ—¶å€™ï¼Œå¯ä»¥æå‰æ„é€ å¥½å¯¹è±¡ä¾›å…¶ä½¿ç”¨ã€‚ éœ€è¦è¿”å›ä¸åŒçš„å­ç±»çš„æ—¶å€™ã€‚ é™æ€å·¥å‚æ–¹æ³•å‘½å valueOf â€”- è¿”å›å€¼ä¸å‚æ•°å…·æœ‰ç›¸åŒçš„å€¼ of â€”- valueOfçš„æ›¿ä»£ geteInstance â€”- é€šè¿‡å‚æ•°æè¿°è¿”å›å®ä¾‹ï¼Œä½†æ˜¯å€¼ä¸ä¸€å®šç›¸åŒ newInstance â€”- åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ getType â€”- Typeè¡¨ç¤ºè¿”å›çš„å®ä¾‹çš„ç±»å‹ newType â€”- è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹","tags":[{"name":"JAVA","slug":"JAVA","permalink":"https://yangle94.github.io/tags/JAVA/"}]},{"title":"SpringMVC_Annotation_@RequestBody","date":"2017-03-01T11:33:40.000Z","path":"2017/03/01/SpringMVC-Annotation-RequestBody/","text":"@RequestBodyæ³¨è§£çš„æºç 123456@Target(&#123;ElementType.PARAMETER&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface RequestBody &#123; boolean required() default true;&#125; ç”±æºç å¯è§ï¼Œ@RequestBodyåªæœ‰ä¸€ä¸ªrequiredå±æ€§ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼Œè¯¥æ³¨è§£ä¼šä¿ç•™è‡³.classæ–‡ä»¶ä¸­ï¼Œåˆ©ç”¨åå°„å¯ä»¥è¿›è¡ŒæŸ¥æ‰¾ã€‚ @RequestBodyçš„ä½œç”¨è¯¥æ³¨è§£å¸¸ç”¨æ¥å¤„ç†Content-Type: ä¸æ˜¯application/x-www-form-urlencodedç¼–ç çš„å†…å®¹ï¼Œä¾‹å¦‚application/json, application/xmlç­‰ï¼› å®ƒæ˜¯é€šè¿‡ä½¿ç”¨HandlerAdapter é…ç½®çš„HttpMessageConvertersæ¥è§£æpost data bodyï¼Œç„¶åç»‘å®šåˆ°ç›¸åº”çš„beanä¸Šçš„ã€‚ å› ä¸ºé…ç½®æœ‰FormHttpMessageConverterï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç† application/x-www-form-urlencodedçš„å†…å®¹ï¼Œå¤„ç†å®Œçš„ç»“æœæ”¾åœ¨ä¸€ä¸ªMultiValueMapé‡Œï¼Œè¿™ç§æƒ…å†µåœ¨æŸäº›ç‰¹æ®Šéœ€æ±‚ä¸‹ä½¿ç”¨ï¼Œè¯¦æƒ…æŸ¥çœ‹FormHttpMessageConverter api; ä¾‹å¦‚1234@RequestMapping(value = \"sendMessage\", method = RequestMethod.POST)public String sendMesscage(@RequestBody UserIdCodeDTO userIdCodeMessageDTO) &#123; return userIdCodeMessageDTO.toString();&#125; è¿ç”¨æ¬¡æ³¨è§£åï¼ŒSprimgMVCå°†ä¼šæŠŠpostæˆ–è€…getè¯·æ±‚æ¥çš„ä¿¡æ¯è¿›è¡Œé€†åºåˆ—åŒ–ï¼Œç»„æˆå¯¹è±¡ï¼Œå‰ææ˜¯ä½ ä¼ è¿‡æ¥çš„å€¼è·Ÿè¯¥å¯¹è±¡åŒ¹é…ã€‚ æ³¨æ„ï¼ï¼ä½¿ç”¨è¯¥æ³¨è§£ä»¥åï¼Œè‹¥æƒ³ä¼ é€éjsonæ ¼å¼ä»£ç ï¼Œéœ€è¦æŒ‡å®šè¯·æ±‚å¤´Content-Typeä¸ºapplication/jsonï¼Œå¦åˆ™å¯¹è±¡æ‰€æœ‰å±æ€§å°†ä¸ºnullã€‚","tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://yangle94.github.io/tags/SpringMVC/"}]},{"title":"Java transientå…³é”®å­—ä½¿ç”¨è®°å½•","date":"2017-02-28T14:01:58.000Z","path":"2017/02/28/Java-transient/","text":"ä»Šå¤©å¯¹æŸä¸ªå¯¹è±¡ä½¿ç”¨FastJsonè¿›è¡Œåºåˆ—åŒ–çš„æ—¶å€™æƒ³è¦æŠŠæŸä¸ªå±æ€§è¿›è¡Œéšè—ï¼Œæ‰¾äº†åŠå¤©æ²¡æ‰¾åˆ°FastJsonæœ‰ä»€ä¹ˆæ³¨è§£ã€‚æŸ¥è¯¢äº†åŠå¤©å‘ç°è°‹ç¯‡åšå®¢æœ‰å…³äºtransientå…³é”®å­—çš„ä»‹ç»ï¼Œçœ‹å®Œçªç„¶è§‰å¾—Javaç™½å­¦äº†ï¼Œè¿˜æœ‰è¿™ä¹ˆä¸€ä¸ªå…³é”®å­—ä¸çŸ¥é“ã€‚ transientçš„ä½œç”¨åŠä½¿ç”¨æ–¹æ³• æˆ‘ä»¬çŸ¥é“Javaä¸­å®Œæˆå¯¹è±¡çš„åºåˆ—åŒ–éœ€è¦å®ç°Serilizableæ¥å£ï¼Œå®ç°äº†è¯¥æ¥å£åˆ™å¯ä»¥è¿›è¡Œå¯¹è±¡çš„åºåˆ—åŒ–ã€‚ç„¶è€Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæ€»ä¼šæœ‰æŸäº›å±æ€§æˆ‘ä»¬å¹¶ä¸æƒ³è®©å®ƒè¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥å¯¹æ­¤å±æ€§åŠ ä¸Štransientå…³é”®å­—ï¼Œä»¥åè¿™ä¸ªå±æ€§å°±ä¸ä¼šå†è¢«è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæˆä¸ºå®ƒçš„å±€é™æ€§ï¼Œå› ä¸ºæ²¡æ³•è®©åºåˆ—åŒ–ã€ååºåˆ—åŒ–ä¸åŒæ—¶è¿›è¡Œã€‚ æ ·ä¾‹ä»£ç ï¼š12345678910111213class User implements Serializable &#123; private transient String passwd; public String getPasswd() &#123; return passwd; &#125; public void setPasswd(String passwd) &#123; this.passwd = passwd; &#125;&#125; transientä½¿ç”¨å°ç»“ &emsp;&emsp;è¢«transientä¿®é¥°çš„å˜é‡ï¼Œå¦‚æœè¿›è¡Œåºåˆ—åŒ–ï¼šæ¯”å¦‚å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œåˆ™æ­¤å˜é‡å°±ä¸èƒ½å†è¢«è¯»å–åˆ°ï¼Œä¼šè¢«èµ‹å€¼ä¸ºnull &emsp;&emsp;transientå…³é”®å­—åªèƒ½ä¿®é¥°æˆå‘˜å˜é‡ï¼Œä¸èƒ½ä¿®é¥°æ–¹æ³•å’Œç±»ã€‚å¦‚æœæŸä¸ªç±»ä¸­éœ€è¦ä½¿ç”¨æ­¤å…³é”®å­—ï¼Œå¿…é¡»å°†è¯¥ç±»å®ç°Serilizableæ¥å£ &emsp;&emsp;é™æ€å˜é‡ä¸è®ºæ˜¯å¦è¢«ä¿®é¥°ï¼Œå‡ä¸å¯è¢«åºåˆ—åŒ–ã€‚æ­¤æ—¶æ³¨æ„ï¼Œè™½ç„¶å†æ¬¡ååºåˆ—åŒ–ä»¥åstaticå˜é‡å¯èƒ½è¿˜ä¼šæœ‰å€¼ï¼Œæ­¤æ—¶è¿™ä¸ªå€¼å¯¹åº”çš„ä¸ºå½“å‰è™šæ‹Ÿæœºä¸­æ•´ä¸ªç±»æ‰€å¯¹åº”çš„å€¼ï¼Œå¹¶éå› ä¸ºå°†è¯¥å±æ€§åºåˆ—åŒ–æ—¶å¯¹æ­¤å±æ€§è¿›è¡Œäº†åºåˆ—åŒ–ã€‚å› ä¸ºstaticå˜é‡ä¸ºç±»å…±æœ‰ï¼Œæ­¤å±æ€§ä¸ºç±»å…±æœ‰ï¼Œè€Œå¹¶éå¯¹è±¡ç§æœ‰ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://yangle94.github.io/tags/Java/"},{"name":"FastJson","slug":"FastJson","permalink":"https://yangle94.github.io/tags/FastJson/"}]},{"title":"Macä¸ŠGithubçš„sshã€httpçš„ä»£ç†","date":"2017-02-25T08:49:42.000Z","path":"2017/02/25/github-ssh-pxory/","text":"å› ä¸ºæˆ‘ä»¬èº«å¤„å¤©æœå¤–åŠ æŸå µå¢™çš„åŸå› ï¼Œè®¿é—®Githubå®åœ¨æ˜¯ä¸ç¨³å®šï¼ŒSSHæ…¢çš„è¦æ­»ï¼Œç®€ç›´äº†ã€‚ç°åœ¨äº¤ç»™å¤§å®¶åˆ©ç”¨ShadowScoketè¿›è¡Œå¯¹Githubçš„åŠ é€Ÿã€‚ è´­ä¹°ä¸€ä¸ªVPNéšä¾¿ä»€ä¹ˆVPNéƒ½å¥½ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯TMDVPNï¼Œæˆ‘è‡ªå·±ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œä¹Ÿä¸æ˜¯å¾ˆè´µï¼Œæœ‰æƒ³è¦çš„ç«¥é‹è¯·ç»™æˆ‘å‘Emailï¼š1024920977@qq.comï¼Œæˆ‘ä¹°çš„æ˜¯50å…ƒåŠå¹´ï¼Œä¸€ä¸ªæœˆ20Gæµé‡ï¼Œé™„å¸¦é‚€è¯·ç çš„æ³¨å†Œåœ°å€ã€‚å…·ä½“ä½¿ç”¨ShadowScoketçš„æ•™ç¨‹ä»–ä»¬å®˜ç½‘ä¸Šéƒ½æœ‰ã€‚ è®¾ç½®Gitçš„ä»£ç†åœ°å€ httpsã€httpsä»£ç†å¦‚å„å¹³å°çš„ Shadowsocks å®¢æˆ·ç«¯éƒ½æä¾›ä¸€ä¸ªæœ¬åœ°çš„ socks5 ä»£ç†ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·è®¾ç½®ï¼Œè®© Git é€šè¿‡ HTTP é“¾æ¥ clone ä»£ç æ—¶èµ° socks5 ä»£ç†,å½“ç„¶ï¼Œä½ éœ€è¦çœ‹çœ‹ä½ çš„ShadowScoketçš„socks5çš„ç›‘å¬ç«¯å£æ˜¯å¤šå°‘ï¼ˆShadowScoketé‡Œå¤´é«˜çº§è®¾ç½®æœ‰æ˜¾ç¤ºï¼‰ã€‚1234//é€šè¿‡ http é“¾æ¥ clone ä»£ç æ—¶èµ° socks5 ä»£ç†git config --global http.proxy \"socks5://127.0.0.1:1086\"//é€šè¿‡ https é“¾æ¥ clone ä»£ç æ—¶èµ° socks5ä»£ç†git config --global https.proxy \"socks5://127.0.0.1:1086\" sshä»£ç†ä¸Šé¢è®¾ç½®çš„ HTTP ä»£ç†å¯¹è¿™ç§æ–¹å¼ clone ä»£ç æ˜¯æ²¡æœ‰å½±å“çš„ï¼Œä¹Ÿå°±æ˜¯å¹¶ä¸ä¼šåŠ é€Ÿï¼ŒSSH çš„ä»£ç†éœ€è¦å•ç‹¬è®¾ç½®ï¼Œå…¶å®è¿™ä¸ªè·Ÿ Git çš„å…³ç³»å·²ç»ä¸æ˜¯å¾ˆå¤§ï¼Œæˆ‘ä»¬éœ€è¦æ”¹çš„ï¼Œæ˜¯SSH çš„é…ç½®ã€‚åœ¨ç”¨æˆ·ç›®å½•ä¸‹å»ºç«‹å¦‚ä¸‹æ–‡ä»¶ ~/.ssh/configï¼Œå¯¹ GitHub çš„åŸŸååšå•ç‹¬çš„å¤„ç†123456789 # è¿™é‡Œå¿…é¡»æ˜¯ github.comï¼Œå› ä¸ºè¿™ä¸ªè·Ÿæˆ‘ä»¬ clone ä»£ç æ—¶çš„é“¾æ¥æœ‰å…³Host github.com # å¦‚æœç”¨é»˜è®¤ç«¯å£ï¼Œè¿™é‡Œæ˜¯ github.comï¼Œå¦‚æœæƒ³ç”¨443ç«¯å£ï¼Œè¿™é‡Œå°±æ˜¯ ssh.github.comè¯¦è§ https://help.github.com/articles/using-ssh-over-the-https-port/ HostName github.com User git # å¦‚æœæ˜¯ HTTP ä»£ç†ï¼ŒæŠŠä¸‹é¢è¿™è¡Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠ proxyport æ”¹æˆè‡ªå·±çš„ http ä»£ç†çš„ç«¯å£ # ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=6667 # å¦‚æœæ˜¯ socks5 ä»£ç†ï¼Œåˆ™æŠŠä¸‹é¢è¿™è¡Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶æŠŠ 6666 æ”¹æˆè‡ªå·± socks5 ä»£ç†çš„ç«¯å£ # ProxyCommand nc -v -x 127.0.0.1:6666 %h %p æ•´ä¸ªä»£ç†å°±å®Œæˆäº†ï¼Œä»¥åä½ è¦æ˜¯ç”¨httpã€httpå’Œsshæ–¹å¼è®¿é—®Githubå°±ä¼šèµ°ShadowScoketçš„socks5çš„ä»£ç†ï¼Œå‰ææ˜¯ä½ å¿…é¡»è¦è®²ShadowScoketæ‰“å¼€å¹¶ä¸”é“¾æ¥ä¸ŠvpnæœåŠ¡å™¨ï¼Œå¦åˆ™ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚","tags":[{"name":"Github","slug":"Github","permalink":"https://yangle94.github.io/tags/Github/"}]},{"title":"è‡ªå®šä¹‰Selenium Grid2 Servlet","date":"2017-02-07T07:45:32.000Z","path":"2017/02/07/SeleniumGridCustomServlet/","text":"æœ€è¿‘æselenium gridçš„æ—¶å€™éœ€è¦æ”¶é›†æ¯ä¸ªæ—¶åˆ»selenium girdçš„ç›‘æ§æ•°æ®ï¼Œæ‰¾äº†åŠå¤©å¥½ä¸å®¹æ˜“åœ¨seleniumçš„å®˜ç½‘æ–‡æ¡£çš„æŸä¸ªè§’è½æ‰¾åˆ°äº†åŠæ³•ï¼Œç‰¹æ­¤è®°å½•ã€‚ å®˜ç½‘è‡ªå®šä¹‰Sevletæ–‡æ¡£ è‡ªå®šä¹‰servletæ­¥éª¤ ä¸‹è½½selenium-server-standalone-3.0.1.jarï¼Œæ–°å»ºä¸€ä¸ªjavaå·¥ç¨‹å¹¶å°†å…¶å½“ä½œlibåŒ…å€’å…¥ã€‚ å·¥ç¨‹ä¸‹æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰servletç±»ï¼Œç»§æ‰¿org.openqa.grid.web.servlet.RegistryBasedServletæˆ–è€…javax.servlet.http.HttpServlet.ç±»ã€‚RegistryBasedServletç±»ä¸ºselenium gridçš„æ ¸å¿ƒç±»ï¼Œå¦‚æœä½ æƒ³è¦è·å¾—selenium gridçš„æ ¸å¿ƒæ•°æ®ï¼Œè¯·ç»§æ‰¿è¯¥ç±»ã€‚ å°†æ­¤é¡¹ç›®å¯¼å‡ºä¸ºä¸€ä¸ªæ–°jaråŒ…ï¼Œå¹¶å°†å…¶ä¸selenium-server-standalone-3.0.1.jaræ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ å†æ­¤ç›®å½•ä¸‹æ‰§è¡Œ 1java -cp xxx.jar:selenium-server-standalone-3.0.1.jar org.openqa.grid.selenium.GridLauncherV3 -servlets org.openqa.grid.web.servlet.custom.CustomServlet, è‹¥ä¸ºhubåˆ™å†åŠ å…¥â€œ-role hubâ€ç­‰å…¶å®ƒæ‰€éœ€å‚æ•°ã€‚ æ³¨æ„äº‹é¡¹java -cpæ˜¯classpathçš„æ„æ€ï¼Œæ„æ€æ˜¯å°†æŸäº›jaråŠ å…¥åˆ°classpathä¸­ï¼Œä¸¤ä¸ªjarç”¨ï¼šéš”å¼€ï¼Œæ­¤æ—¶æ³¨æ„åœ¨linuxä¸‹ä¸æ”¯æŒé€šé…ç¬¦ï¼Œæ‰€ä»¥å¿…é¡»æ‰‹åŠ¨å°†åå­—è¡¥å…¨ã€‚-servletsåè·Ÿçš„æ˜¯è‡ªå®šä¹‰servletçš„åœ°å€ï¼ŒGridLauncherV3ä¸ºmainå‡½æ•°æ‰€åœ¨ä½ç½®ï¼Œåœ¨3.0ä»¥åçš„selenium-server-standalone.jarä¸­ä¸ºGridLauncherV3ï¼Œ2.0ä¸ºGridLauncherã€‚","tags":[{"name":"Selenium Grid","slug":"Selenium-Grid","permalink":"https://yangle94.github.io/tags/Selenium-Grid/"}]},{"title":"dockeråŒ–selenium grid","date":"2017-02-07T07:08:32.000Z","path":"2017/02/07/docker-selenium/","text":"å› ä¸ºå·¥ä½œéœ€è¦ï¼Œæœ¬äººæ„å»ºäº†ä¸€ä¸ªdockeråŒ–selenium gridï¼Œç‰¹æ­¤è®°å½•ï¼Œä»¥å¤‡å…¶å®ƒæœ‰ç”¨çš„äººä½¿ç”¨ã€‚ 1 ä½¿ç”¨åœºæ™¯è°ƒç ” å®ŒæˆæŸä¸ªåŠŸèƒ½çš„æ‰€æœ‰æ“ä½œæ­¥éª¤åœ¨åŒä¸€ä¸ªé¡µé¢ã€sessionä¸­ã€‚ å¯¹åŒä¸€ä¸ªè™šæ‹Ÿæœºä¸­å¤šä¸ªæµè§ˆå™¨ï¼ˆå¤šä¸ªwebdriverã€ä¸åŒç”¨æˆ·ï¼‰ä¹‹é—´å¿…é¡»è¿›è¡Œæµè§ˆå™¨å±‚çš„cookieséš”ç¦»ï¼Œä¿è¯ç›¸äº’ä¹‹é—´cookiesä¸åº”ç›¸äº’å½±å“ã€‚ å¯¹åŒä¸€ä¸ªè™šæ‹Ÿæœºä¸­å¤šä¸ªæµè§ˆå™¨ï¼ˆå¤šä¸ªwebdriverã€ä¸åŒç”¨æˆ·ï¼‰è¿›è¡Œæ¨¡æ‹Ÿé”®ç›˜è¾“å…¥æ—¶ï¼Œä¿è¯æ‰€æœ‰é”®ç›˜æ“ä½œå¿…é¡»ç›¸äº’éš”ç¦»ï¼Œä¿è¯å¯¹åº”çš„æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥è¿›å…¥å…¶å¯¹åº”çš„è¾“å…¥æ¡†å†…ã€‚ å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè°ƒåº¦æ’åºã€‚ è®¾å®šè¶…æ—¶æ—¶é—´ï¼Œå¯¹è¶…è¿‡æ—¶é—´é™åˆ¶çš„è¯·æ±‚è¿›è¡Œåˆ é™¤ï¼Œä¿è¯èµ„æºçš„é‡Šæ”¾ã€‚ å¯¹å„ä¸ªseleniumèŠ‚ç‚¹æœ‰å¯¹åº”åŠŸèƒ½æ€§ç›‘æ§ï¼ˆæ¯”å¦‚æŸä¸ªèŠ‚ç‚¹æ˜¯å¦ç©ºé—²ç­‰ï¼‰ã€‚ å„ä¸ªseleniumèŠ‚ç‚¹å¯¹åº”çš„æ—¥å¿—æŸ¥çœ‹é—®é¢˜ã€‚ 2 DockeråŒ–Selenium Grid2è¿˜å­˜åœ¨çš„é—®é¢˜ Windowså¯¹dockeræä¾›çš„é•œåƒåˆ†åˆ«ä¸ºnanoServerå’Œwindowsservercoreï¼Œä½†å…¶ä¸­å¹¶ä¸å­˜åœ¨GUIã€IEç­‰æ‰€éœ€å†…å®¹ï¼ŒæŸ¥é˜…å®˜æ–¹èµ„æ–™ï¼Œå®˜æ–¹äººå‘˜è¯´æ˜ç›®å‰é¡¹ç›®å¹¶ä¸æ”¯æŒGUIæ“ä½œã€‚è¯¦è§å…³äºdockeräº§å“ç»ç†å¯¹äºWindows GUIçš„è¯´æ˜ã€‚ ç›®å‰å¯¹äºwindowsé•œåƒéœ€è¦äººä¸ºçš„å¹²é¢„ã€‚ç›®å‰æˆ‘æ‰€é‡‡ç”¨çš„æ–¹å¼æ˜¯ä¸ºå•ç‹¬å»ºç«‹windowsçš„è™šæ‹Ÿæœºï¼Œåœ¨è™šæ‹Ÿæœºä¸Šå¯¹é‡æ–°éƒ¨ç½²seleniumã€‚åœ¨å¯¹å«æœ‰æ’ä»¶çš„é¡µé¢è¿›è¡Œè®¿é—®æ—¶ï¼Œéœ€è¦æå‰å°†æ’ä»¶å®‰è£…å¥½ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦æå‰å¯¹docker fileè¿›è¡Œæ„å»ºã€‚ 3 æ•´ä½“æ„å»ºå›¾4 å„ä¸ªnodeèŠ‚ç‚¹çš„åŠŸèƒ½æ€§ç›‘æ§ åœ¨selenium gridçš„hubèŠ‚ç‚¹ä¸­è‡ªå¸¦äº†ä¸€ä¸ªç›‘æ§é¡µé¢ï¼Œç”¨äºç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„è¿è¡Œæƒ…å†µã€ipç«¯å£ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰å¤šå°‘ä»»åŠ¡åœ¨æ’é˜Ÿä¸­å½“å‰æ€»å…±æœ‰å¤šå°‘ä»»åŠ¡åœ¨è¿è¡Œç­‰ï¼Œæ­¤é¡µé¢è®¿é—®åœ°å€ä¸ºselenium hubèŠ‚ç‚¹çš„4444ç«¯å£ã€‚ 5 éƒ¨ç½²æ­¥éª¤ éƒ¨ç½²selenium hub1docker run -d -p 4444:4444 â€“name registry.cn-hangzhou.aliyuncs.com/angle/selenium-hub:2.1 éƒ¨ç½²chrome1docker run -d -P -p 5900:5900 â€“link selenium-hub:hub â€“name chrome registry.cn-hangzhou.aliyuncs.com/angle/node-chrome-debug:2.1 éƒ¨ç½²firefox1docker run -d -P -p 5901:5900 â€“link selenium-hub:hub â€“name firefox registry.cn-hangzhou.aliyuncs.com/angle/node-firefox-debug:2.1 éƒ¨ç½²IEnodeconfig.json12345678910111213141516171819202122232425&#123;â€œcapabilitiesâ€: [ &#123; â€œbrowserNameâ€: â€œinternet explorerâ€, â€œmaxInstancesâ€: 3, â€œseleniumProtocolâ€: â€œWebDriverâ€ &#125; ],â€œproxyâ€: â€œorg.openqa.grid.selenium.proxy.DefaultRemoteProxyâ€,â€œmaxSessionâ€: 3,â€œportâ€: 5555,â€œregisterâ€: true,â€œregisterCycleâ€: 5000,â€œhubâ€: â€œhttp://localhost:4444â€œ,â€œnodeStatusCheckTimeoutâ€: 5000,â€œnodePollingâ€: 5000,â€œroleâ€: â€œnodeâ€,â€œunregisterIfStillDownAfterâ€: 60000,â€œdownPollingLimitâ€: 2,â€œdebugâ€: false,â€œservletsâ€ : [],â€œwithoutServletsâ€: [],â€œcustomâ€: &#123;&#125;&#125; ä¸‹è½½selenium-server-standalone-3.0.1.jar ä¸‹è½½åœ°å€ï¼šhttps://selenium-release.storage.googleapis.com/3.0/selenium-server-standalone-3.0.1.jar éƒ¨ç½²å‘½ä»¤1java -jar selenium-server-standalone.jar -role node -nodeConfig nodeconfig.json 6 å·²è§£å†³çš„é—®é¢˜æˆ‘æ‰€ç”¨çš„åŸå§‹Selenium Grid Dockeré•œåƒä¸­æœ‰ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œéœ€è¦åœ¨docker fileä¸­åŠ å…¥å­—ç¬¦é›†è§£å†³ã€‚Selenium Gridä¸­å­˜åœ¨ç›‘æ§åŠŸèƒ½å¹¶ä¸å®Œå–„ï¼Œè‹¥æƒ³è¦è·å–æ­¤ç±»ä¿¡æ¯æ•°æ®ï¼Œéœ€è¦åŠ å…¥è‡ªå®šä¹‰servletï¼ˆå…³äºæ­¤ç« æˆ‘ä¼šåœ¨å¦ä¸€ç‰‡æ–‡ç« ä¸­ä»‹ç»ï¼‰ 7 ä¸‹è½½ä»¥åŠä¸­æ–‡é€‚é…ç”±äºseleniumå®˜æ–¹çš„dockeré•œåƒå¯¹äºä¸­æ–‡å…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œä¼šå‡ºç°æŸäº›ä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºå…¶åŒ…å«çš„ä¹Œç­å›¾é•œåƒä¸­ç¼ºå°‘äº†éƒ¨åˆ†å­—ç¬¦é›†çš„åŸå› ï¼Œä¸ºäº†ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç‰¹æ„åˆ¶ä½œäº†ä¿®å¤äº†æ­¤é—®é¢˜çš„é•œåƒå¹¶ä¸Šä¼ åˆ°äº†é˜¿é‡Œäº‘é•œåƒæœåŠ¡å™¨ï¼ˆä»£ç ä¸­å·²ç»æ›¿æ¢ï¼‰ã€‚","tags":[{"name":"Selenium Grid","slug":"Selenium-Grid","permalink":"https://yangle94.github.io/tags/Selenium-Grid/"},{"name":"Docker","slug":"Docker","permalink":"https://yangle94.github.io/tags/Docker/"}]},{"title":"javaå†…éƒ¨ç±»å®ç°åŸç†ä»¥åŠæ³¨æ„äº‹é¡¹","date":"2016-12-28T07:08:32.000Z","path":"2016/12/28/innerClass/","text":"1.ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼šå®šä¹‰åœ¨æŸä¸ªç±»ä¸­çš„ç±»å«åšå†…éƒ¨ç±»ã€‚ 2.å†…éƒ¨ç±»æœ‰ä»€ä¹ˆå¥½å¤„ï¼š1ï¼‰å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®ç±»å®šä¹‰æ‰€åœ¨çš„åšå“¦ç”¨è¯­ä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰æ•°æ®ã€‚2ï¼‰å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥ã€‚3ï¼‰å½“æƒ³è¦å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”åˆä¸æƒ³ç¼–å†™å¤§é‡ä»£ç çš„æ—¶å€™ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¯”è¾ƒä¾¿æ·ã€‚ 3.å†…éƒ¨ç±»å®ç°åŸç†ä»£ç æ ·ä¾‹:12345678910111213141516171819class TalkingClock &#123; private int interval; private boolean beep; public TalkingClock(int interval, boolean beep) &#123; this.interval = interval; this.beep = beep; &#125; public void start() &#123; ActionListener listener = new TimePrinter(); Time t = new Time(interval,listener); t.start(); &#125; public class TimePrinter implements ActionListener &#123; public void actionPerformed(ActionEvent event) &#123; Date now = new Date(); if(beep) Toolkit.getDefaultToolkit().beep(); &#125; &#125;&#125; è§£é‡Š:é¦–å…ˆï¼Œå†…éƒ¨ç±»æ˜¯ä¸€ç§ç¼–è¯‘å™¨ç°è±¡ï¼Œä¸javaè™šæ‹Ÿæœºæ— å…³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œç±»å¹¶ä¸å­˜åœ¨å†…éƒ¨ç±»ä¸€è¯´ã€‚åœ¨ä¸Šé¢ä¸¤ä¸ªç±»ä¸­ï¼ŒTimePrinterlç±»æ˜¯TalkingClockçš„å†…éƒ¨ç±»ï¼Œå½“javaç¼–è¯‘å™¨å¯¹æ­¤ä¸¤ä¸ªç±»è¿›è¡Œç¼–è¯‘æ—¶ï¼Œä¼šå°†å†…éƒ¨ç±»TimePrinterç¼–è¯‘ä¸ºTalkingClock$TimePrinterï¼Œå¹¶åœ¨å†…éƒ¨ç±»ä¸­å¢åŠ ä¸€æ¡å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œä»¥æ­¤æ¥è®¿é—®å¤–éƒ¨ç±»å¯¹è±¡ä¸­çš„åŸŸï¼Œå¹¶ä¼šä¿®æ”¹å…¶æ— å‚çš„æ„é€ æ–¹æ³•ä¸ºæœ‰å‚çš„æ„é€ æ–¹æ³•ï¼ˆå¢åŠ ä¸€ä¸ªTalkingClockå‚æ•°ï¼‰ï¼Œå¯¹äºå¤–éƒ¨ç±»TalkingClockï¼Œä¼šå¢åŠ ä¸€ä¸ªstatic boolean access$0(TalkingClock)æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥ä½¿ç”¨java -private innerClass.TalkingClock$TimePrinter(ç”±äºåœ¨linuxç­‰ç³»ç»Ÿçš„shellä¸­$ä¸ºå…³é”®å­—ï¼Œæ‰€ä»¥æ­¤æ—¶éœ€è¦è½¬ä¹‰)æŸ¥çœ‹ã€‚ 123456789101112public class TalkingClock$TimePrinter &#123; public TalkingClock$TimePrinter(TalkingClock); public void actionPerformed(java.awt.event.ActionEvent); final TalkingClock this$0;&#125;class TalkingClock &#123; private int interval; private boolean beep; public TalkingClock(int interval, boolean beep); public void start(); static boolean access$0(TalkingClock);&#125; ç”±æ­¤ï¼Œå½“å†…éƒ¨ç±»ä¸­éœ€è¦è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰æˆå‘˜æ—¶ï¼Œå†…éƒ¨ç±»å¯ä»¥è°ƒç”¨å¤–éƒ¨ç±»çš„é™æ€æ–¹æ³•è¿›è¡Œå¯¹ç§æœ‰æˆå‘˜çš„è®¿é—®ã€‚å½“ç„¶ï¼Œaccess$0å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„javaæ–¹æ³•åï¼Œå› æ­¤ï¼Œåœ¨javaå±‚é¢è°ƒç”¨æ­¤æ–¹æ³•åå¹¶ä¸ç°å®ã€‚ä½†å¯ä»¥ç”¨åº•å±‚çš„å…¶ä»–æ–¹æ³•è¿›è¡Œå¯¹æ­¤æ–¹æ³•çš„è°ƒç”¨ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://yangle94.github.io/tags/Java/"}]},{"title":"jqçš„ajaxè¯·æ±‚åå°æœªå‡ºé”™å´è¿›å…¥erroré—®é¢˜","date":"2016-12-27T07:08:32.000Z","path":"2016/12/27/jqAjaxResError/","text":"ç°è±¡:1234567891011121314jqè¿›è¡Œajaxè¯·æ±‚ï¼Œåç«¯å¹¶ä¸ºæŠ¥é”™ï¼ŒçŠ¶æ€ç ä¸º200ä½†ajaxè¯·æ±‚è¿›å…¥erroræ–¹æ³•ã€‚ $.ajax(&#123; url : \"http:/www.baidu.com\", data : &#123; param : \"param\" &#125; dataType : \"json\", success : function(data) &#123; alert(\"è¿”å›æˆåŠŸï¼Œè¿›å…¥æˆåŠŸæ–¹æ³•\"); &#125; error : function() &#123; alert(\"è¿”å›å¤±è´¥ï¼Œè¿›å…¥å¤±è´¥æ–¹æ³•\") &#125; &#125;) æ£€æŸ¥æ€è·¯:1.æŸ¥çœ‹åç«¯æ—¥å¿—ï¼Œå‘ç°åç«¯å¹¶æœªæŠ¥é”™ã€‚2.æ‰“å¼€è°·æ­Œæµè§ˆå™¨è°ƒè¯•æ¨¡å¼ï¼Œå‘ç°çŠ¶æ€å—ä¸º200ã€‚ ç”±æ­¤å¯æ¨æ–­å‡ºåå°å¹¶ä¸ºå‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œåˆ¤æ–­å¹¶ä¸æ˜¯å› ä¸ºåç«¯é”™è¯¯æ‰€å¯¼è‡´ã€‚ç”±æ­¤å¯ä»¥åˆ¤æ–­èƒ½å¤Ÿæ¥è§¦åˆ°è¿”å›æ•°æ®å¹¶å‡ºç°é”™è¯¯çš„åªèƒ½æ˜¯jséƒ¨åˆ†ã€‚ æœ€ç»ˆç»“æœæŸ¥è¯¢èµ„æ–™åå‘ç°ï¼Œå¯¹äºajaxè¯·æ±‚å¦‚æœè§„å®šäº†è¿”å›å€¼çš„æ ¼å¼ï¼ˆdataTypeï¼‰ï¼Œåˆ™è¿”å›å€¼ä¸€å®šè¦ç¬¦åˆdataTypeçš„æ ¼å¼ã€‚è‹¥è¿”å›çš„æ ¼å¼è·ŸdataTypeçš„æ ¼å¼ä¸ç›¸ç¬¦ï¼Œjsä¼šåœ¨è§£æçš„æ—¶å€™æŠ¥é”™ï¼Œç”±æ­¤è¿›å…¥äº†errorçš„æ–¹æ³•ã€‚åç«¯ä»¥å‰è¿”å›å€¼ä¸ºâ€successâ€ï¼Œå°†å…¶æ”¹ä¸º{â€œisSuccessâ€ : â€œsuccessâ€}åè¿›è¡Œè¿”å›ï¼Œç¨‹åºè¿è¡ŒæˆåŠŸï¼Œè¿›å…¥ajaxçš„successæ–¹æ³•ã€‚ç”±æ­¤å¯è§ï¼Œè‹¥è§„å®šäº†dataTypeä»¥åï¼Œåç«¯è¿”å›çš„æ•°æ®å¿…é¡»ç¬¦åˆæ­¤æ ¼å¼ï¼Œå¦åˆ™ï¼Œå‰ç«¯jsåœ¨è§£æçš„æ—¶å€™ä¼šå‘ç”Ÿé”™è¯¯ã€‚","tags":[{"name":"ajax","slug":"ajax","permalink":"https://yangle94.github.io/tags/ajax/"},{"name":"jq","slug":"jq","permalink":"https://yangle94.github.io/tags/jq/"}]},{"title":"å¼€åšäº†ï½","date":"2016-12-25T07:08:32.000Z","path":"2016/12/25/index/","text":"å“ˆå“ˆï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œç»ˆäºåœ¨github pageä¸Šå¼€äº†è‡ªå·±çš„åšå®¢ï¼Œé¡¿æ—¶å…´å¥‹æ— æ¯”ã€‚ æœ¬ç«™ä¸»è¦æ˜¯ç”¨åœ¨æˆ‘ä¸ªäººå†™çš„ä¸€äº›ç¨‹åºä¸­é‡åˆ°çš„é—®é¢˜ã€‚æœ¬äººåˆå‡ºèŒ…åºï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿä¸åèµæ•™ã€‚æœ¬æ¬¡ä»…ä»…æ˜¯ä¸ºäº†æµ‹è¯•æ­æˆçš„æ¡†æ¶æ˜¯å¦å¯ä»¥è¿è¡Œï¼Œç¨åä¼šå†™ä¸€ä¸ªåšå®¢çš„æ­å»ºæ•™ç¨‹ã€‚","tags":[{"name":"other","slug":"other","permalink":"https://yangle94.github.io/tags/other/"}]}]